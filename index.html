
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
  <meta name="keywords" content="胡小黑,架构师,资深软件工程师,object-c,swift,java,node,小黑,技术,大牛,阿里巴巴,腾讯,旅游">
  
  
    <title>小黑的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="sam">
    
    <meta name="baidu-site-verification" content="zBj0BDqjSV" />
    
    <meta name="description" content="胡小黑 大型网络架构">
<meta name="keywords" content="胡小黑,架构师,资深软件工程师,object-c,swift,java,node,小黑,技术,大牛,阿里巴巴,腾讯,旅游">
<meta property="og:type" content="website">
<meta property="og:title" content="小黑的技术博客">
<meta property="og:url" content="http://www.huguiqi.top/index.html">
<meta property="og:site_name" content="小黑的技术博客">
<meta property="og:description" content="胡小黑 大型网络架构">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小黑的技术博客">
<meta name="twitter:description" content="胡小黑 大型网络架构">
<meta name="twitter:creator" content="@XiaoheiSpring">
<link rel="publisher" href="109318125124422212783">

    
    <link rel="alternative" href="/atom.xml" title="小黑的技术博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">

</head>

  <body>
    <header>
      
<div>
<p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>

		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="小黑的技术博客" title="小黑的技术博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="小黑的技术博客">小黑的技术博客</a></h1>
				<h2 class="blog-motto">不积跬步无以至千里</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li><a href="http://blog.huguiqi.com.">副站</a></li>
					<li>
 					
						<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" autocomplete="on" class="st-default-search-input"  name="q" maxlength="30" placeholder="搜索" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/05/springCloud微服务做到全局配置文件动态刷新/" title="springCloud微服务做到全局配置文件动态刷新" itemprop="url">springCloud微服务做到全局配置文件动态刷新</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-11-05T15:00:53.000Z" itemprop="datePublished"> 发表于 2019-11-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="springCloud通过cloudBus实现config动态刷新"><a href="#springCloud通过cloudBus实现config动态刷新" class="headerlink" title="springCloud通过cloudBus实现config动态刷新"></a>springCloud通过cloudBus实现config动态刷新</h1><p>springCloud中通过spring-config组件，可以实现配置文件外置在git仓库中，如果某个服务需要更改配置文件，也可以做到不重启服务，刷新此服务的配置文件。</p>
<h3 id="config-server"><a href="#config-server" class="headerlink" title="config-server"></a>config-server</h3><p>spring-config-server 项目的<br>pom.xml:</p>
<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;config-server&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;name&gt;config-server&lt;/name&gt;
    &lt;description&gt;config-server&lt;/description&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.0.7.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
        &lt;spring-cloud.version&gt;Finchley.RELEASE&lt;/spring-cloud.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;
            &lt;version&gt;2.9.10&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;
            &lt;version&gt;2.9.10&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
            &lt;version&gt;2.9.10&lt;/version&gt;
        &lt;/dependency&gt;



        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;version&gt;1.18.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
            &lt;version&gt;1.2.49&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;


&lt;/project&gt;
</code></pre><p>ConfigServerApplication.java:</p>
<pre><code>@SpringBootApplication
@EnableEurekaClient
@EnableConfigServer
@ComponentScan(basePackages = &quot;com.example.controller&quot;)
public class ConfigServerApplication {

    public static void main(String[] args) {
        SpringApplication.run(ConfigServerApplication.class, args);
    }


}
</code></pre><h4 id="config-server配置文件"><a href="#config-server配置文件" class="headerlink" title="config-server配置文件"></a>config-server配置文件</h4><p>配置文件application.yml:</p>
<pre><code>server:
  port: 8883
  servlet:
    context-path: /

spring:
  application:
      name: config-server
  profiles:
      active: local
  cloud:
    config:
      server:
        git:
          uri: http://gitlab.rios.com:8080/servers/config-repo.git
          clone-on-start: true
          username: sam.hu
          password: 12345678
          default-label: master

eureka:
  instance:
    hostname: localhost
    prefer-ip-address: true
    instance-id: ${eureka.instance.hostname}:${server.port}
    nonSecurePort: ${server.port}
  client:
    service-url:
      defaultZone: http://localhost:9999/eureka
    healthcheck:
          enabled: true



management:
  endpoints:
    web:
      exposure:
        include: &apos;*&apos;
</code></pre><h3 id="eureka"><a href="#eureka" class="headerlink" title="eureka"></a>eureka</h3><p>pom.xml:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;eureka&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;

    &lt;name&gt;eureka&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot(spring cloud)&lt;/description&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.0.7.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
        &lt;spring-cloud.version&gt;Finchley.RELEASE&lt;/spring-cloud.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;/dependency&gt;


        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;
            &lt;version&gt;2.9.10&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;
            &lt;version&gt;2.9.10&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
            &lt;version&gt;2.9.10&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;


&lt;/project&gt;
</code></pre>
        
        
        <p class="article-more-link">
          
            <a href="/2019/11/05/springCloud微服务做到全局配置文件动态刷新/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/11/05/springCloud微服务做到全局配置文件动态刷新/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/11/05/springCloud微服务做到全局配置文件动态刷新/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/07/10/flume初探/" title="flume初探" itemprop="url">flume初探</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-07-10T15:14:00.000Z" itemprop="datePublished"> 发表于 2019-07-10</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="什么是flume"><a href="#什么是flume" class="headerlink" title="什么是flume"></a>什么是flume</h2><blockquote>
<blockquote>
<p>Flume是Cloudera提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力。</p>
</blockquote>
</blockquote>
<p>这个定义来自百度百科。</p>
<p>当然，由于百度的公信力与可靠性越来越差，我周边大部分的技术人员都不相信百度了，那我们就看看flume官网是怎么定义它的。</p>
<p>官方:</p>
<blockquote>
<blockquote>
<p>Flume is a distributed, reliable, and available service for efficiently collecting, aggregating, and moving large amounts of log data. It has a simple and flexible architecture based on streaming data flows. It is robust and fault tolerant with tunable reliability mechanisms and many failover and recovery mechanisms. It uses a simple extensible data model that allows for online analytic application.</p>
</blockquote>
</blockquote>
<p>由于我英文与不是特别好，但是感觉和百度百科的定义应该大致相致。<br>通过google翻译为中文如下:</p>
<blockquote>
<blockquote>
<p>Flume是一种分布式，可靠且可用的服务，用于有效地收集，聚合和移动大量日志数据。 它具有基于流数据流的简单灵活的架构。 它具有可靠的可靠性机制和许多故障转移和恢复机制，具有强大的容错性。 它使用简单的可扩展数据模型，允许在线分析应用程序。</p>
</blockquote>
</blockquote>
<p>以下是flume官方给出的flume架构图：</p>
<p><img src="http://blog.huguiqi.com/1562772504860hkflis2v.png?imageslim" alt="paste image"></p>
<p>根据这个图，我猜的大概意思应该是，入口从web服务来。一个agen由source,sink,channel组成。</p>
<p>source对应的是入口地址定义。<br>将从source获取的数据丢到channel管道中，然后输出到sink，sink定义与配置了具体是什么存储介质来接受数据。</p>
<p>使用flume的基本系统要求：</p>
<ul>
<li>Java Runtime Environment - Java 1.8 or later</li>
<li>Memory - Sufficient memory for configurations used by sources, channels or sinks</li>
<li>Disk Space - Sufficient disk space for configurations used by channels or sinks</li>
<li>Directory Permissions - Read/Write permissions for directories used by agent</li>
</ul>
<p>内存和磁盘空间都可以通过配置文件进行配置，对agent的使用的目录必须有读写权限。</p>
<p>ps: 最近这家叫Cloudera的公司好像传出资金链断裂的消息.</p>
<p>不过，好在它早就是Apache基金会下的一个开源项目。</p>
<h2 id="有什么优缺点"><a href="#有什么优缺点" class="headerlink" title="有什么优缺点"></a>有什么优缺点</h2><h4 id="优点"><a href="#优点" class="headerlink" title="优点:"></a>优点:</h4><ul>
<li>高吞吐，高可用，高可靠的数据收集工具</li>
</ul>
<p>Apache Flume具有高度可扩展性，可靠性，可用性，可水平扩展以及可针对不同源数据和Sink进行定制,有助于收集，汇总和移动大量的数据集。 例如Facebook，Twitter和电子商务网站产生的数据等</p>
        
        
        <p class="article-more-link">
          
            <a href="/2019/07/10/flume初探/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/flume/">flume</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/07/10/flume初探/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/07/10/flume初探/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/04/springboot-kafka/" title="springboot_kafka" itemprop="url">springboot_kafka</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-06-04T08:55:00.000Z" itemprop="datePublished"> 发表于 2019-06-04</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="springboot-kafka集成"><a href="#springboot-kafka集成" class="headerlink" title="springboot_kafka集成"></a>springboot_kafka集成</h1><h1 id="kafka-client"><a href="#kafka-client" class="headerlink" title="kafka_client"></a>kafka_client</h1><h2 id="maven-依赖"><a href="#maven-依赖" class="headerlink" title="maven 依赖"></a>maven 依赖</h2><p>pom.xml:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;
    &lt;version&gt;2.1.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><h2 id="安装kafka"><a href="#安装kafka" class="headerlink" title="安装kafka"></a>安装kafka</h2><p><a href="http://kafka.apache.org/" target="_blank" rel="noopener">kafka官网</a></p>
<h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><ol>
<li>下载kafka</li>
</ol>
<p>目前最新版本是2.2.0</p>
<p><a href="https://www.apache.org/dyn/closer.cgi?path=/kafka/2.2.0/kafka_2.12-2.2.0.tgz" target="_blank" rel="noopener">下载地址</a></p>
<pre><code>&gt; tar -xzf kafka_2.12-2.2.0.tgz
&gt; cd kafka_2.12-2.2.0
</code></pre><ol>
<li>启动zooKeeper服务器</li>
</ol>
<p>因为kafka的运行需要zookeeper 作节点调度，所以kafka包里有zookeeper服务器的启动脚本,启动单节点的zookeeper实例:</p>
<pre><code>kafka_2.11-2.2.1&gt; sh ./bin/zookeeper-server-start.sh config/zookeeper.properties
    /Users/sam/Public/bigData/kafka_2.11-2.2.1/bin/kafka-run-class.sh: line 306: /usr/libexec/java_home/bin/java: Not a directory
    /Users/sam/Public/bigData/kafka_2.11-2.2.1/bin/kafka-run-class.sh: line 306: exec: /usr/libexec/java_home/bin/java: cannot execute: Not a directory
</code></pre><p>启动zookeeper服务器报错，说<code>kafka-run-class.sh</code>里的java_home找不到，那么vi这个文件进去定位到306行，在226行前一行插入<code>JAVA_HOME</code>：</p>
<pre><code># Which java to use
225 JAVA_HOME=&apos;/Library/Java/JavaVirtualMachines/jdk1.8.0_161.jdk/Contents/Home&apos;
226
227 if [ -z &quot;$JAVA_HOME&quot; ]; then
228   JAVA=&quot;java&quot;
229 else
230   JAVA=&quot;$JAVA_HOME/bin/java&quot;
231 fi
</code></pre><p>保存，再次启动zookeeper:</p>
<pre><code>sh ./bin/zookeeper-server-start.sh config/zookeeper.properties
</code></pre><p>控制台中打印出：</p>
<pre><code>[2019-06-04 15:02:29,345] INFO binding to port 0.0.0.0/0.0.0.0:2181 (org.apache.zookeeper.server.NIOServerCnxnFactory)
</code></pre><p>表示启动成功。</p>
<ol>
<li>启动kafka服务器</li>
</ol>
<p>执行：</p>
<pre><code>sh bin/kafka-server-start.sh config/server.properties
</code></pre><p>控制台打出：</p>
<pre><code>[2019-06-04 15:07:19,041] INFO Awaiting socket connections on s0.0.0.0:9092. (kafka.network.Acceptor)
[2019-06-04 15:07:19,068] INFO [SocketServer brokerId=0] Created data-plane acceptor and processors for endpoint : EndPoint(null,9092,ListenerName(PLAINTEXT),PLAINTEXT) (kafka.network.SocketServer)
</code></pre><p>代表启动成功!!</p>
<ol>
<li>写一个生产者test，往kafka服务里写数据</li>
</ol>
<p>看代码。。。。</p>
<ol>
<li>写一个消费者服务，从kafka服务里获取生产都的数据，并对数据进行消费</li>
</ol>
<p>看代码</p>
        
        
        <p class="article-more-link">
          
            <a href="/2019/06/04/springboot-kafka/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/springboot/">springboot</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/springboot/">springboot</a><a href="/tags/kafka/">kafka</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/06/04/springboot-kafka/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/06/04/springboot-kafka/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/05/22/工作，生活心情整理/" title="工作，生活心情整理" itemprop="url">工作，生活心情整理</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-05-22T15:03:24.000Z" itemprop="datePublished"> 发表于 2019-05-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="最近心情很焦虑"><a href="#最近心情很焦虑" class="headerlink" title="最近心情很焦虑"></a>最近心情很焦虑</h1><p>可能是因为步入中年，每个中年人都会有这种感觉吧。<br>曾经年少时觉得，中年对我而言还太早，觉得就算自己到中年，绝对不会像网上相关文章说的那样惨，但是现在，我觉得很有可能会更惨。</p>
<p>2017年10月份，我结婚了，那一年，刚好30岁，那一年在事业上也是我最迷茫的一年。幸好，在生活上，我找到了目标，结束了我半人的生活。我很感谢我老婆，也很感谢我岳父岳母，让我感觉很幸福。</p>
<p>2018年3月12日凌晨2点多，我可爱的女儿诞生了，从那一刻起，我觉得我一定要更努力赚钱，为女儿将来有更多的人生选择。因为，我小时候的选择太少了，物质条件太贫瘠了。</p>
<pre><code>老师告诉我，读书是唯一途径，但是，当年我爸爸那一代人普遍觉得，读书没什么用，我那时就很矛盾，我想把书读好，但是我心里经常又会质疑老师说的话，觉得老师在骗人，读书有用的话，为什么他们要做老师，而且当时我遇到很多老师素质并不好，读高中时，我对老师这个职业是最讨厌的，因为他们当中很多人非常的虚伪，甚至有些老师现在回想看来，连起码的做人底线都没有。所以我从高中开始，就发誓，永远不要做老师，因为老师这个职业在我看来，是对自己最大的侮辱，可能是这个社会的悲哀吧，也可能是中国教育的失败吧，曾经的师生之道，荡然无存，师无德，生无礼。我希望我的女儿将来也不要做教师，因为教师在我心里，是最肮脏的职业。
</code></pre><p> 家庭的负担从女儿出生开始，我感觉每个月的支出除去房贷，确实压力不小，如果出现了金融危机，我失业了，对家庭是个不小的打击。我觉得，应该提高家庭的抗风险能力。</p>
<ul>
<li><p>如何提升搞风险能力呢？</p>
<ul>
<li>基金</li>
</ul>
</li>
</ul>
<p>这个问题我一直在摸索中，其中，我从2017年开始，就投资了某p2p平台，其中有一家投资的平台暴雷，损失了一万多块钱,~_~ 我很伤心。<br>后来，2018年底开始基金定投，每两周定投200元到我选择的基金中，到目前为止，我收益了1500多元，因为2019年中美贸易战，A股市场一直在跌，估计这1000多块钱还是会跌回去，但是长期来看，中美贸易战结束后，我相信会迎来一波春天，我决定坚持下去。</p>
<p>直接买股票，赚得快。但是目前我自认为还没有能力预知股市的能力，所以直接买股票，至少这两年我不会做。</p>
<pre><code>* 网红
</code></pre><p>之前的一个朋友已经开始了网红之路了，目前他创作的视频点击率已经超过了27万次，马上就可以接广告了。但是，对于我来说，没时间做这个，也没他有创意去做这个。但是，我媳妇已经在积累粉丝了，他每天的口头蝉就是：”等我以后火了，月放十万，你就给我跪下叫爸爸”!。    </p>
<ul>
<li>父母家庭不和谐</li>
</ul>
<p>我父母从我记事起，他们就在不停的吵架，打架，一直到我母亲瘫痪在床，甚至前天，我妹妹打电话给我，说和我父亲吵架了，吵得异常凶狠，互相骂得就像没人知道他们是父女，就像仇人一样。</p>
<p>为什么？一个家庭会这样，半辈子都在争吵中渡过？这是一个正常家庭吗？</p>
<p>我的父亲是个脾气暴躁的人，是个蛮横不讲理的人，是个霸道且长年家暴的人，同时又是一个不聪明，却又固执的人。一提起他，我觉得没有人能跟他正常生活超过3天。在心里面，我恨他。我记得，小时候，有一天晚上不知道是因为什么事，我被他揍了，当时心理非常难受，觉得为什么让我出生在这样的家庭，为什么让我面对一个这样的父亲，当天晚上，我甚至都想拿起菜刀，趁他熟睡的时候，送他走了，也算是为家庭做出贡献，但理智让我放下了刀，他毕竟是我父亲。</p>
<p>我的妹妹从小生活在我父母身边，他读完初中，因为讨厌上学(经常跟同学逃课去县城里玩)，而被送到了我父母工作的城市—-云南曲靖，那个时候我是非常反对我妹妹辍学去云南给我父母帮忙做生意的，但只怪我当时无能力改变。</p>
<p>当时心中一直在想，我妹妹将来肯定会后悔当初的决定，只怕将来会埋怨父母，埋怨我没有拦着他。其实我妹妹很聪明，如果让他学一门技术，其实他能很快学会，但是，错就错在，生在这样一个家庭。<br>我妹妹的性格现在让我感觉完全就是我父亲的性格，脾气大，不听劝，偏执，固执，一根筋，没耐性，不爱干净。<br>我只能说，摊上这种父母，我无能为力。</p>
<p>我从小是很不听话的那种小孩，因为生活在这样的家庭里，从初中到大学，都没有和父母生活在一起，我能够分辨出哪些是对的，哪些我是觉得绝对不能听从的。所以，在父母和外人看来，我是非常不听话的，而且每年只要我父母回来，我都会和他们吵架，他们说什么，我不会全部都认为是对的。</p>
<p>我的母亲其实脾气也不小，虽然你看着他感觉很可怜，但是套用鲁讯的一句话：”可怜之人必有可恨之处”!</p>
<p>我的母亲非常唠叨，而且话也非常多，最要命的是，说话从来不过脑子，也从来不长记性，一辈子都不长记性，不过脑子，脾气还不小。</p>
<p>遇到我父亲这种人，肯定不是被骂就是被凶，如果来回吵，肯定就动手了，不该说的别说，永远不知道闭嘴，你知道他蠢，你又说出来，他不恼凶成怒吗？你知道他做错了，你一直说，他不恼凶成怒吗？</p>
<p>希望我不会成为一个那样的父亲，如果哪一天，我发现自己也变成那样，我觉得应该从楼上跳下去自杀，因为如果我变成这样，会对自己的孩子产生一生的阴影。<br>会直接影响孩子的未来健康成长，如果是这样，不如死了算了。</p>
<h2 id="工作琐事分享"><a href="#工作琐事分享" class="headerlink" title="工作琐事分享"></a>工作琐事分享</h2><ul>
<li>年纪越大，耐心越差</li>
</ul>
<p>之前听过一句话，说年纪越大，耐心越差。年经越大，越不想听别人说话。</p>
<p>最近在工作中感受就越来越深了，虽然我很尊重我的领导，也很认同他的工作方式，但是，有时候真的会让我很崩溃。因为，在一些工作中，从头到尾都是他在说，一直说，几乎不给其它人说话的机会，也几乎没有耐心听别人的完整方案，也经常提出一些没经过分析的方案，如果不挑战他吧，按照他说的做，可能做的时候就会入大坑，事后总不能说，”按你说的做的，现在有问题了，没法做下去了“！，但这个时候你就完全被他左右了，被他框死了。如果挑战他吧，又觉得事太多，给他难堪。我觉得，我的领导可能会慢慢的变成了他以前讨厌的人，我真的很惋惜。</p>
<ul>
<li>年纪越大，越自负</li>
</ul>
<p>这个可以理解，因为工作经验会比别人要多，确实在很多地方比较有经验，从而也是非常自信。但请注意，不是全部领域，如果把这种心态上升到权威，上升到绝对自信，我觉得这会打击很多人的自信心，让他们有疑问都不敢提，对领导的方案没有怀疑，其实这对整个工作是没有好处的。对员工而言，也是没有好处的，因为员工得不到锻炼，而解决方案也不一定达到最优。只有在不断的质疑中权衡出来的方案，才是团队的最优方案。</p>
<h2 id="如何平衡生活与工作压力"><a href="#如何平衡生活与工作压力" class="headerlink" title="如何平衡生活与工作压力"></a>如何平衡生活与工作压力</h2><p>这两天一直想回老家看看我母亲，看看她，也只能是看看她。<br>但是，现在想想，对于现状的改变，没有任何作用，既然没有作用，那就算了吧，等国庆节再带着我的小可爱一起回去吧，既然改变不了，又何须徒添伤悲呢？</p>
<p>努力工作吧，为自己的这个新家应对更大的挑战而努力吧！！！！<br>工作上，质疑领导的事情还是少做吧！！！</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/05/22/工作，生活心情整理/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/05/22/工作，生活心情整理/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/04/21/spring-aop-annotation/" title="spring+aop+annotation" itemprop="url">spring+aop+annotation</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-04-21T13:51:05.000Z" itemprop="datePublished"> 发表于 2019-04-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="spring-boot-aop"><a href="#spring-boot-aop" class="headerlink" title="spring-boot-aop"></a>spring-boot-aop</h1><p>spring boot + aop</p>
<h1 id="AOP原理详解"><a href="#AOP原理详解" class="headerlink" title="AOP原理详解"></a>AOP原理详解</h1><p>我们都知道，aop的原理就是动态代理，所以首先来介绍下java的动态代理</p>
<h2 id="动态代理方式"><a href="#动态代理方式" class="headerlink" title="动态代理方式"></a>动态代理方式</h2><p>主要有两种：</p>
<ol>
<li>jdk自带动态代理</li>
<li>cglib</li>
</ol>
<h3 id="JDK自带动态代理"><a href="#JDK自带动态代理" class="headerlink" title="JDK自带动态代理"></a>JDK自带动态代理</h3><blockquote>
<blockquote>
<p>JDK自带的动态代理方式必须要被代理对象实现某些接口；</p>
</blockquote>
</blockquote>
<p>JDK动态代理所用到的代理类在程序调用到代理类对象时才由JVM真正创建，JVM根据传进来的 业务实现类对象 以及 方法名 ，动态地创建了一个代理类的class文件并被字节码引擎执行，然后通过该代理类对象进行方法调用。我们需要做的，只需指定代理类的预处理、调用后操作即可。</p>
<h4 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h4><ol>
<li>实现InvocationHandler接口</li>
<li>调用java.lang.reflect.Proxy类的newProxyInstance或者getProxyClass方法</li>
</ol>
<p>将被代理类传给即将生成的代理类<br>Proxy.newProxyInstance(target.getClass().getClassLoader(),target.getClass().getInterfaces(),this);</p>
<ol>
<li>重载invoke方法，将要处理的统一事件填入</li>
</ol>
<pre><code>public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {.....}
</code></pre><h4 id="关键源码分析"><a href="#关键源码分析" class="headerlink" title="关键源码分析"></a>关键源码分析</h4><pre><code>newProxyInstance ---&gt; getProxyClass0 ---&gt;proxyClassCache.get(loader, interfaces)---&gt;Object subKey = Objects.requireNonNull(subKeyFactory.apply(key, parameter));----&gt;ProxyClassFactory.apply 
</code></pre><h4 id="apply方法里关键代码："><a href="#apply方法里关键代码：" class="headerlink" title="apply方法里关键代码："></a>apply方法里关键代码：</h4><p>//生成代理类class文件</p>
<pre><code>long num = nextUniqueNumber.getAndIncrement();     
String proxyName = proxyPkg + proxyClassNamePrefix + num; 
byte[] proxyClassFile = ProxyGenerator.generateProxyClass(proxyName, interfaces, accessFlags);
</code></pre><h3 id="CGLIB"><a href="#CGLIB" class="headerlink" title="CGLIB"></a>CGLIB</h3><p>cglib是针对类来实现代理的，原理是对指定的业务类生成一个子类，并覆盖其中业务方法实现代理。因为采用的是继承，所以不能对final修饰的类进行代理。</p>
<p>demo中使用的是apache实现的cglib动态代理类：</p>
<p>github地址：</p>
<pre><code>https://github.com/cglib/cglib
</code></pre><p>在这个项目中，我用apache的cglib实现去模拟spring aop的工作原理</p>
        
        
        <p class="article-more-link">
          
            <a href="/2019/04/21/spring-aop-annotation/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/04/21/spring-aop-annotation/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/04/21/spring-aop-annotation/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/03/12/jenkins重置jop的buildNum/" title="jenkins重置jop的buildNum" itemprop="url">jenkins重置jop的buildNum</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-03-12T10:31:00.000Z" itemprop="datePublished"> 发表于 2019-03-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <ol>
<li>Jenkins -&gt; Manage Jenkins</li>
<li>脚本命令行</li>
</ol>
<p>执行：</p>
<pre><code>resetNumberTarget = 1
item = Jenkins.instance.getItemByFullName(&quot;run-bzy-hotel&quot;)
//println(item)
item.builds.each() { build -&gt;
  //println(build)
  //println(build.number)
  if(build.number &gt;= resetNumberTarget)
  {
    println(&quot;About to Delete &apos;&quot; + build + &quot;&apos;&quot;)    
    build.delete()  
  }
}
item.updateNextBuildNumber(resetNumberTarget)
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/jenkins/">jenkins</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/03/12/jenkins重置jop的buildNum/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/03/12/jenkins重置jop的buildNum/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/03/12/spring-security oauth2 集成 swagger 2.9.2/" title="spring-security oauth2 集成 swagger 2.9.2" itemprop="url">spring-security oauth2 集成 swagger 2.9.2</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-03-12T03:56:00.000Z" itemprop="datePublished"> 发表于 2019-03-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="pring-security-oauth2-集成-swagger-2-9-2"><a href="#pring-security-oauth2-集成-swagger-2-9-2" class="headerlink" title="pring-security oauth2 集成 swagger 2.9.2"></a>pring-security oauth2 集成 swagger 2.9.2</h1><p>pom.xml:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?\&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;\&gt;
&lt;modelVersion\&gt;4.0.0\&lt;/modelVersion\&gt;

&lt;groupId\&gt;com.xxx.xxx\&lt;/groupId\&gt;
&lt;artifactId\&gt;bzy-auth\&lt;/artifactId\&gt;
&lt;version\&gt;1.0\&lt;/version\&gt;
&lt;packaging\&gt;jar\&lt;/packaging\&gt;

&lt;name\&gt;xxx-auth\&lt;/name\&gt;
&lt;description\&gt;xxx-auth project for sign,auth\&lt;/description\&gt;

&lt;parent\&gt;
&lt;groupId\&gt;com.xxxl.xxx\&lt;/groupId\&gt;
&lt;artifactId\&gt;xxx-parent\&lt;/artifactId\&gt;
&lt;version\&gt;1.0.0-SNAPSHOT\&lt;/version\&gt;
&lt;/parent\&gt;

&lt;dependencies\&gt;

&lt;dependency\&gt;
&lt;groupId\&gt;com.hhotel.bzy\&lt;/groupId\&gt;
&lt;artifactId\&gt;bzy-common-swagger\&lt;/artifactId\&gt;
&lt;version\&gt;${common.swagger.version}\&lt;/version\&gt;
&lt;type\&gt;jar\&lt;/type\&gt;
&lt;/dependency\&gt;

&lt;dependency\&gt;
&lt;groupId\&gt;org.springframework.cloud\&lt;/groupId\&gt;
&lt;artifactId\&gt;spring-cloud-starter-netflix-eureka-client\&lt;/artifactId\&gt;
&lt;/dependency\&gt;


&lt;dependency\&gt;
&lt;groupId\&gt;org.springframework.cloud\&lt;/groupId\&gt;
&lt;artifactId\&gt;spring-cloud-starter-security\&lt;/artifactId\&gt;
&lt;/dependency\&gt;
&lt;dependency\&gt;
&lt;groupId\&gt;org.springframework.security.oauth.boot\&lt;/groupId\&gt;
&lt;artifactId\&gt;spring-security-oauth2-autoconfigure\&lt;/artifactId\&gt;
&lt;version\&gt;2.1.1.RELEASE\&lt;/version\&gt;
&lt;/dependency\&gt;

&lt;/dependencies\&gt;




&lt;/project\&gt;
</code></pre><p>SwaggerConfig:</p>
<pre><code>package com.xxx.xxx.auth.config;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.AuthorizationCodeGrantBuilder;
import springfox.documentation.builders.OAuthBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.\*;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spi.service.contexts.SecurityContext;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger.web.SecurityConfiguration;
import springfox.documentation.swagger.web.SecurityConfigurationBuilder;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

import java.util.Arrays;

/\*\*  \* Created by sam on 2019/3/11.
     */
    @Configuration
    @EnableSwagger2
    public class SwaggerAuthConfig {

    @Value(&quot;${bzy.swagger-enable}&quot;)
    private Boolean swaggerEnable;

    @Value(&quot;${bzy.swagger-auth-url}&quot;)
    private String authServerUrl;

    @Value(&quot;${bzy.security-auth2.clientId}&quot;)
    private String clientId;

    @Value(&quot;${bzy.security-auth2.clientId}&quot;)
    private String secretKey;

    public SwaggerAuthConfig() {

    }
    @Bean
    public Docket api() {
    return new Docket(DocumentationType.SWAGGER_2)
    .enable(this.swaggerEnable.booleanValue())
    .select()
    .apis(RequestHandlerSelectors.any())
    .paths(PathSelectors.any())
    .build()
    .securitySchemes(Arrays.asList(securityScheme()))
    .securityContexts(Arrays.asList(securityContext()));
    }

    @Bean
    public SecurityConfiguration security() {
    return SecurityConfigurationBuilder.builder()
    .clientId(clientId)
    .clientSecret(secretKey)
    .scopeSeparator(&quot; &quot;)
    .useBasicAuthenticationWithAccessCodeGrant(true)
    .build();
    }


    private SecurityScheme securityScheme() {
    GrantType grantType = new AuthorizationCodeGrantBuilder()
    .tokenEndpoint(new TokenEndpoint(authServerUrl + &quot;/token&quot;, &quot;oauthtoken&quot;))
    .tokenRequestEndpoint(
    new TokenRequestEndpoint(authServerUrl + &quot;/authorize&quot;, clientId, secretKey))
    .build();

    SecurityScheme oauth = new OAuthBuilder().name(&quot;spring_oauth&quot;)
    .grantTypes(Arrays.asList(grantType))
    .scopes(Arrays.asList(scopes()))
    .build();
    return oauth;
    }

    private AuthorizationScope[]() scopes() {
    AuthorizationScope[]() scopes = {
    new AuthorizationScope(&quot;read&quot;, &quot;for read operations&quot;),
    new AuthorizationScope(&quot;write&quot;, &quot;for write operations&quot;),
    new AuthorizationScope(&quot;all&quot;, &quot;for all operation API&quot;) };
    return scopes;
    }

    private SecurityContext securityContext() {
    return SecurityContext.builder()
    .securityReferences(
    Arrays.asList(new SecurityReference(&quot;spring_oauth&quot;, scopes())))
    .forPaths(PathSelectors.any())
    .build();
    }
    }
</code></pre><p><a href="https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api" target="_blank" rel="noopener">参考文章</a></p>
<p><a href="https://www.xncoding.com/2017/07/08/spring/sb-swagger2.html" target="_blank" rel="noopener">优秀博客</a></p>
<p><a href="https://www.cnblogs.com/bndong/p/10037197.html" target="_blank" rel="noopener">优秀博客</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/spring-security-oauth2-swagger2-9-2/">spring-security oauth2 swagger2.9.2</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/03/12/spring-security oauth2 集成 swagger 2.9.2/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/03/12/spring-security oauth2 集成 swagger 2.9.2/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/03/01/微服务与SOA/" title="微服务与传统垂直架构和SOA比较" itemprop="url">微服务与传统垂直架构和SOA比较</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-03-01T07:25:05.000Z" itemprop="datePublished"> 发表于 2019-03-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="传统垂直架构"><a href="#传统垂直架构" class="headerlink" title="传统垂直架构"></a>传统垂直架构</h2><p>传统垂直架构一般是在业务量非常小，业务系统非常简单的系统架构中使用，<br>在这个阶段一般采用SSH，SSM或者spring+mybatis）框架作为项目的关键技术，Struts负责web层逻辑控制、Spring负责业务层管理Bean、Hibernate/mybatis负责数据库操作进行封装，持久化数据。</p>
<p><img src="http://blog.huguiqi.com/1551425267404h53ty19h.png?imageslim" alt="paste image"></p>
<p>如果公司进一步的做大，垂直子系统会变的越来越多，系统和系统之间的调用关系呈指数上升的趋势。</p>
<p>在这样的背景下，很多公司都会考虑服务的SOA化。</p>
<h2 id="SOA"><a href="#SOA" class="headerlink" title="SOA"></a>SOA</h2><p>软件即服务，将单个业务软件系统作为接口提供服务。</p>
<p>SOA代表面向服务的架构，将应用程序根据不同的职责划分为不同的模块，不同的模块直接通过特定的协议和接口进行交互。这样使整个系统切分成很多单个组件服务来完成请求，当流量过大时通过水平扩展相应的组件来支撑，所有的组件通过交互来满足整体的业务需求。</p>
<p><img src="http://blog.huguiqi.com/1551425561530q5t2toln.png?imageslim" alt="paste image"></p>
<p>SOA缺点；</p>
<h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><p>微服务架构是 SOA 架构思想的一种扩展，更加强调服务个体的独立性、拆分粒度更小。<br>与SOA相比，有以下区别：</p>
<ul>
<li>微服务架构强调业务系统需要彻底的组件化和服务化，一个组件就是一个产品，可以独立对外提供服务微服务。</li>
<li>不再强调传统SOA架构里面比较重的ESB企业服务总线</li>
<li>微服务强调每个微服务都有自己独立的运行空间，包括数据库资源。</li>
<li>微服务架构本身来源于互联网的思路，因此组件对外发布的服务强调了采用HTTP Rest API的方式来进行微服务的切分粒度会更小。</li>
</ul>
<p>微服务优点：</p>
<ol>
<li>通过分解巨大单体应用为多个服务方法解决了复杂性问题。</li>
<li>微服务架构模式使得每个微服务独立部署，开发者不再需要协调其它服务部署对本服务的影响。</li>
<li>微服务架构模式使得每个服务可独立扩展。</li>
<li>微服务可有效的拆分应用，实现敏捷开发和部署。</li>
</ol>
<p>不足：</p>
<h2 id="为什么选择spring-cloud"><a href="#为什么选择spring-cloud" class="headerlink" title="为什么选择spring cloud"></a>为什么选择spring cloud</h2><ol>
<li>Spring Cloud来源于Spring，质量、稳定性、持续性都可以得到保证。</li>
<li>Spirng Cloud天然支持Spring Boot，更加便于业务落地。</li>
<li>Spring Cloud发展非常的快，从16年开始接触的时候相关组件版本为1.x，到现在已经发布了2.1.3系列</li>
<li>Spring Cloud是Java领域最适合做微服务的框架。相比于其它框架,Spring Cloud对微服务周边环境的支持力度最大。对于中小企业来讲，使用门槛较低。Spring Cloud　是微服务架构的最佳落地方案</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/03/01/微服务与SOA/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/03/01/微服务与SOA/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/02/22/跟黑哥一起学kafka-一/" title="跟黑哥一起学kafka(一)" itemprop="url">跟黑哥一起学kafka(一)</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-02-22T02:58:12.000Z" itemprop="datePublished"> 发表于 2019-02-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="跟黑哥一起学kafka-一"><a href="#跟黑哥一起学kafka-一" class="headerlink" title="跟黑哥一起学kafka(一)"></a>跟黑哥一起学kafka(一)</h1><h2 id="什么是kafka"><a href="#什么是kafka" class="headerlink" title="什么是kafka"></a>什么是kafka</h2><p>官方原文是这样的：</p>
<blockquote>
<blockquote>
<p>Kafka® is used for building real-time data pipelines and streaming apps. It is horizontally scalable, fault-tolerant, wicked fast, and runs in production in thousands of companies.</p>
</blockquote>
</blockquote>
<p>kafka是用作构建处理实时数据管道和流式数据的应用。<br>它是可以水平扩展的，容错的，快速反应的，被成千上万家公司应用于生产的应用。</p>
<p>这个解析好生硬啊，官方还给了一张图：</p>
<p><img src="http://blog.huguiqi.com/1550805309682duugdu6c.png?imageslim" alt="paste image"></p>
<p>这句话不太好理解，可能语文不太好。<br>不管了，</p>
<h2 id="用来解决什么问题"><a href="#用来解决什么问题" class="headerlink" title="用来解决什么问题"></a>用来解决什么问题</h2><h2 id="kafka主要功能有哪些"><a href="#kafka主要功能有哪些" class="headerlink" title="kafka主要功能有哪些"></a>kafka主要功能有哪些</h2><h2 id="安装-amp-使用"><a href="#安装-amp-使用" class="headerlink" title="安装&amp;使用"></a>安装&amp;使用</h2><ol>
<li>源码安装</li>
<li>docker</li>
<li>安装包</li>
</ol>
<p>我推荐使用docker安装，省时，省力。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/02/22/跟黑哥一起学kafka-一/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/02/22/跟黑哥一起学kafka-一/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/02/20/在google上开通开发者时填入的招商银行双币卡疑似被盗刷/" title="在google上开通开发者时填入的招商银行双币卡疑似被盗刷" itemprop="url">在google上开通开发者时填入的招商银行双币卡疑似被盗刷</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-02-20T08:26:00.000Z" itemprop="datePublished"> 发表于 2019-02-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>今天在开通google cloud 的时候，填写了信用卡信息(因为是必填),顺利开通了google cloud并申请了一台vps vm实例用来作shadowsocks 服务器。</p>
<p>但是，过了一会突然发现招商银行信用卡中心给我微信发了两条交易提醒：</p>
<p><img src="http://blog.huguiqi.com/1550651474728pkwlcyq1.png?imageslim" alt="paste image"></p>
<p>第一感觉就是不是信用卡被盗了？而且是在google上泄漏出去的，这很严重！！！</p>
<p>网上查了一下，原来是google不支持中国（P.R.C），所以只能”被”成为香港（Hong.Kong）公民了,开通了Visa验证，购买后,就会有以下信息：</p>
<pre><code>您尾号XXXX的招行信用卡于1月21日10时15分网上交易当地币8.00元；
</code></pre><p>因为我只是开通开发者成为开发者，并没有真正购买任何商品，只是作了一下信用卡绑定，这可能是google绑定招行双币卡作了一笔会退还的交易，而我注册的时候选择的是居住地在香港，那8元当地币就是港币，当然，它会在几天内还给你，你不需要担心，详见Google的解释：</p>
<pre><code>Authorizations 
Authorizations occur between our billing system and your bank&apos;s billing system to ensure that the card is valid and the necessary funds are available in your account before the order is charged. Because the order has been cancelled, the pending authorization will not result in a charge. 
You may also notice a $1.00 transaction from Google, which is actually a pending authorization request between our billing system and the bank that issued your credit or debit card, so you won&apos;t end up paying the extra $1.00. 
When you check your bank account or credit card statement, payment authorizations are often listed as &quot;pending.&quot; These transactions might remain in your account between 1-14 business days, depending on your card-issuing bank. Please keep in mind they are authorization requests only, not actual charges. 
Authorizations can remain in your account anywhere from 24 hours up to 14 business days, depending on the bank. You may contact your bank to confirm the charge for your purchase with Google or to check on the authorization status.
</code></pre><p>所以，后面又收到一条交易失败的提醒，吓死老子了，我几千万的资产就可能成负的了。。。。。。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂谈/">杂谈</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/02/20/在google上开通开发者时填入的招商银行双币卡疑似被盗刷/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/02/20/在google上开通开发者时填入的招商银行双币卡疑似被盗刷/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>



</div>

      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="huguiqi" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/AFNetWork3-1/" title="AFNetWork3.1">AFNetWork3.1<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Alcatraz/" title="Alcatraz">Alcatraz<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/IT-运维/" title="IT&amp;运维">IT&amp;运维<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/activiti/" title="activiti">activiti<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/docker/" title="docker">docker<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/git/" title="git">git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/github-博客/" title="github 博客">github 博客<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo插件/" title="hexo插件">hexo插件<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/ios-Developer/" title="ios Developer">ios Developer<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/java/" title="java">java<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/javascript/" title="javascript">javascript<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/node/" title="node">node<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/nodejs/" title="nodejs">nodejs<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/redis/" title="redis">redis<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springCloud/" title="springCloud">springCloud<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springboot/" title="springboot">springboot<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/activiti/springboot/" title="springboot">springboot<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springcloud/" title="springcloud">springcloud<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/xcode/" title="xcode">xcode<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/专业技术-印象笔记/" title="专业技术(印象笔记)">专业技术(印象笔记)<sup>222</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端技术/" title="前端技术">前端技术<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/大数据/" title="大数据">大数据<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/感悟/" title="感悟">感悟<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/杂谈/" title="杂谈">杂谈<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/科学上网/" title="科学上网">科学上网<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/站内搜索-博客/" title="站内搜索 博客">站内搜索 博客<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/管理/" title="管理">管理<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/系统/" title="系统">系统<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/系统-工具/" title="系统&amp;工具">系统&amp;工具<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/系统-运维/" title="系统&amp;运维">系统&amp;运维<sup>17</sup></a></li>
		  
		
		  
			<li><a href="/categories/网络配置/" title="网络配置">网络配置<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/读书笔记/" title="读书笔记">读书笔记<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/随笔/" title="随笔">随笔<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/面试题/" title="面试题">面试题<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/从印象笔记导入/" title="从印象笔记导入">从印象笔记导入<sup>222</sup></a></li>
			
		
			
				<li><a href="/tags/随笔/" title="随笔">随笔<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/springboot/" title="springboot">springboot<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/nginx/" title="nginx">nginx<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/spring-cloud/" title="spring cloud">spring cloud<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Rejected/" title="Rejected">Rejected<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/面试题/" title="面试题">面试题<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ReactNative/" title="ReactNative">ReactNative<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ios-developer-upload/" title="ios developer upload">ios developer upload<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker-compose/" title="docker-compose">docker-compose<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker-国内镜像/" title="docker 国内镜像">docker 国内镜像<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/javascript-原型编程/" title="javascript&amp;原型编程">javascript&amp;原型编程<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/jenkins/" title="jenkins">jenkins<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/nodejs/" title="nodejs">nodejs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/redis/" title="redis">redis<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/security/" title="security">security<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/科学上网/" title="科学上网">科学上网<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ios-developer-证书过期/" title="ios developer 证书过期">ios developer 证书过期<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://godeggs.cn " target="_blank" title="承接手机app、微信、web开发">找人做软件</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.huguiqi.com." target="_blank" title="sam&#39;s Blog">sam&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  

<div class="doubanshow">
<p class="asidetitle">豆瓣秀</p>
<div>
<script type="text/javascript" src="http://www.douban.com/service/badge/64698454/?show=collection&amp;n=12&amp;columns=3&amp;hidelogo=yes&amp;hideself=yes&amp;cat=book|movie" ></script>
</div>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1601653200&verifier=bd864c6a&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Sam.This is my Blog. <br/>
			Anything that can go wrong will go wrong</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/1601653200" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/huguiqi" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/XiaoheiSpring" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/sam.hu.7334" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		<a href="https://www.linkedin.com/in/小黑-胡-ab83b992" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		<a href="https://www.douban.com/people/64698454" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/hu-xiao-hei-53" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		<a href="https://plus.google.com/109318125124422212783?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:guiqi.hu@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="http://blog.huguiqi.com." target="_blank" title="sam">sam</a> © 2019 
		
		<a href="/about" target="_blank" title="sam">sam</a>
		
		
		</p>
</div>

 <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','qtnHgvQyg5N9h4en-9wA','2.0.0');
</script>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?f5971877c7b77f98074be3ddabf34fbe";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

    <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//huguiqicom.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<script id="dsq-count-scr" src="//huguiqicom.disqus.com/count.js" async></script>

    
  </body>
 </html>
