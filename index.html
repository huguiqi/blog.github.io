
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
  <meta name="keywords" content="胡小黑,架构师,资深软件工程师,object-c,swift,java,node,小黑,技术,大牛,阿里巴巴,腾讯,旅游">
  
  
    <title>小黑的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="sam">
    
    <meta name="baidu-site-verification" content="zBj0BDqjSV" />
    
    <meta name="description" content="胡小黑 大型网络架构">
<meta name="keywords" content="胡小黑,架构师,资深软件工程师,object-c,swift,java,node,小黑,技术,大牛,阿里巴巴,腾讯,旅游">
<meta property="og:type" content="website">
<meta property="og:title" content="小黑的技术博客">
<meta property="og:url" content="http://www.huguiqi.com/index.html">
<meta property="og:site_name" content="小黑的技术博客">
<meta property="og:description" content="胡小黑 大型网络架构">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小黑的技术博客">
<meta name="twitter:description" content="胡小黑 大型网络架构">
<meta name="twitter:creator" content="@XiaoheiSpring">
<link rel="publisher" href="109318125124422212783">

    
    <link rel="alternative" href="/atom.xml" title="小黑的技术博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">

</head>

  <body>
    <header>
      
<div>
<p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>

		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="小黑的技术博客" title="小黑的技术博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="小黑的技术博客">小黑的技术博客</a></h1>
				<h2 class="blog-motto">不积跬步无以至千里</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li><a href="http://blog.huguiqi.com.">副站</a></li>
					<li>
 					
						<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" autocomplete="on" class="st-default-search-input"  name="q" maxlength="30" placeholder="搜索" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/04/springboot-kafka/" title="springboot_kafka" itemprop="url">springboot_kafka</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-06-04T08:55:00.000Z" itemprop="datePublished"> 发表于 2019-06-04</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="springboot-kafka集成"><a href="#springboot-kafka集成" class="headerlink" title="springboot_kafka集成"></a>springboot_kafka集成</h1><h1 id="kafka-client"><a href="#kafka-client" class="headerlink" title="kafka_client"></a>kafka_client</h1><h2 id="maven-依赖"><a href="#maven-依赖" class="headerlink" title="maven 依赖"></a>maven 依赖</h2><p>pom.xml:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;
    &lt;version&gt;2.1.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><h2 id="安装kafka"><a href="#安装kafka" class="headerlink" title="安装kafka"></a>安装kafka</h2><p><a href="http://kafka.apache.org/" target="_blank" rel="noopener">kafka官网</a></p>
<h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><ol>
<li>下载kafka</li>
</ol>
<p>目前最新版本是2.2.0</p>
<p><a href="https://www.apache.org/dyn/closer.cgi?path=/kafka/2.2.0/kafka_2.12-2.2.0.tgz" target="_blank" rel="noopener">下载地址</a></p>
<pre><code>&gt; tar -xzf kafka_2.12-2.2.0.tgz
&gt; cd kafka_2.12-2.2.0
</code></pre><ol>
<li>启动zooKeeper服务器</li>
</ol>
<p>因为kafka的运行需要zookeeper 作节点调度，所以kafka包里有zookeeper服务器的启动脚本,启动单节点的zookeeper实例:</p>
<pre><code>kafka_2.11-2.2.1&gt; sh ./bin/zookeeper-server-start.sh config/zookeeper.properties
    /Users/sam/Public/bigData/kafka_2.11-2.2.1/bin/kafka-run-class.sh: line 306: /usr/libexec/java_home/bin/java: Not a directory
    /Users/sam/Public/bigData/kafka_2.11-2.2.1/bin/kafka-run-class.sh: line 306: exec: /usr/libexec/java_home/bin/java: cannot execute: Not a directory
</code></pre><p>启动zookeeper服务器报错，说<code>kafka-run-class.sh</code>里的java_home找不到，那么vi这个文件进去定位到306行，在226行前一行插入<code>JAVA_HOME</code>：</p>
<pre><code># Which java to use
225 JAVA_HOME=&apos;/Library/Java/JavaVirtualMachines/jdk1.8.0_161.jdk/Contents/Home&apos;
226
227 if [ -z &quot;$JAVA_HOME&quot; ]; then
228   JAVA=&quot;java&quot;
229 else
230   JAVA=&quot;$JAVA_HOME/bin/java&quot;
231 fi
</code></pre><p>保存，再次启动zookeeper:</p>
<pre><code>sh ./bin/zookeeper-server-start.sh config/zookeeper.properties
</code></pre><p>控制台中打印出：</p>
<pre><code>[2019-06-04 15:02:29,345] INFO binding to port 0.0.0.0/0.0.0.0:2181 (org.apache.zookeeper.server.NIOServerCnxnFactory)
</code></pre><p>表示启动成功。</p>
<ol>
<li>启动kafka服务器</li>
</ol>
<p>执行：</p>
<pre><code>sh bin/kafka-server-start.sh config/server.properties
</code></pre><p>控制台打出：</p>
<pre><code>[2019-06-04 15:07:19,041] INFO Awaiting socket connections on s0.0.0.0:9092. (kafka.network.Acceptor)
[2019-06-04 15:07:19,068] INFO [SocketServer brokerId=0] Created data-plane acceptor and processors for endpoint : EndPoint(null,9092,ListenerName(PLAINTEXT),PLAINTEXT) (kafka.network.SocketServer)
</code></pre><p>代表启动成功!!</p>
<ol>
<li>写一个生产者test，往kafka服务里写数据</li>
</ol>
<p>看代码。。。。</p>
<ol>
<li>写一个消费者服务，从kafka服务里获取生产都的数据，并对数据进行消费</li>
</ol>
<p>看代码</p>
        
        
        <p class="article-more-link">
          
            <a href="/2019/06/04/springboot-kafka/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/springboot/">springboot</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/springboot/">springboot</a><a href="/tags/kafka/">kafka</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/06/04/springboot-kafka/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/06/04/springboot-kafka/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/05/22/工作，生活心情整理/" title="工作，生活心情整理" itemprop="url">工作，生活心情整理</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-05-22T15:03:24.000Z" itemprop="datePublished"> 发表于 2019-05-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="最近心情很焦虑"><a href="#最近心情很焦虑" class="headerlink" title="最近心情很焦虑"></a>最近心情很焦虑</h1><p>可能是因为步入中年，每个中年人都会有这种感觉吧。<br>曾经年少时觉得，中年对我而言还太早，觉得就算自己到中年，绝对不会像网上相关文章说的那样惨，但是现在，我觉得很有可能会更惨。</p>
<p>2017年10月份，我结婚了，那一年，刚好30岁，那一年在事业上也是我最迷茫的一年。幸好，在生活上，我找到了目标，结束了我半人的生活。我很感谢我老婆，也很感谢我岳父岳母，让我感觉很幸福。</p>
<p>2018年3月12日凌晨2点多，我可爱的女儿诞生了，从那一刻起，我觉得我一定要更努力赚钱，为女儿将来有更多的人生选择。因为，我小时候的选择太少了，物质条件太贫瘠了。</p>
<pre><code>老师告诉我，读书是唯一途径，但是，当年我爸爸那一代人普遍觉得，读书没什么用，我那时就很矛盾，我想把书读好，但是我心里经常又会质疑老师说的话，觉得老师在骗人，读书有用的话，为什么他们要做老师，而且当时我遇到很多老师素质并不好，读高中时，我对老师这个职业是最讨厌的，因为他们当中很多人非常的虚伪，甚至有些老师现在回想看来，连起码的做人底线都没有。所以我从高中开始，就发誓，永远不要做老师，因为老师这个职业在我看来，是对自己最大的侮辱，可能是这个社会的悲哀吧，也可能是中国教育的失败吧，曾经的师生之道，荡然无存，师无德，生无礼。我希望我的女儿将来也不要做教师，因为教师在我心里，是最肮脏的职业。
</code></pre><p> 家庭的负担从女儿出生开始，我感觉每个月的支出除去房贷，确实压力不小，如果出现了金融危机，我失业了，对家庭是个不小的打击。我觉得，应该提高家庭的抗风险能力。</p>
<ul>
<li><p>如何提升搞风险能力呢？</p>
<ul>
<li>基金</li>
</ul>
</li>
</ul>
<p>这个问题我一直在摸索中，其中，我从2017年开始，就投资了某p2p平台，其中有一家投资的平台暴雷，损失了一万多块钱,~_~ 我很伤心。<br>后来，2018年底开始基金定投，每两周定投200元到我选择的基金中，到目前为止，我收益了1500多元，因为2019年中美贸易战，A股市场一直在跌，估计这1000多块钱还是会跌回去，但是长期来看，中美贸易战结束后，我相信会迎来一波春天，我决定坚持下去。</p>
<p>直接买股票，赚得快。但是目前我自认为还没有能力预知股市的能力，所以直接买股票，至少这两年我不会做。</p>
<pre><code>* 网红
</code></pre><p>之前的一个朋友已经开始了网红之路了，目前他创作的视频点击率已经超过了27万次，马上就可以接广告了。但是，对于我来说，没时间做这个，也没他有创意去做这个。但是，我媳妇已经在积累粉丝了，他每天的口头蝉就是：”等我以后火了，月放十万，你就给我跪下叫爸爸”!。    </p>
<ul>
<li>父母家庭不和谐</li>
</ul>
<p>我父母从我记事起，他们就在不停的吵架，打架，一直到我母亲瘫痪在床，甚至前天，我妹妹打电话给我，说和我父亲吵架了，吵得异常凶狠，互相骂得就像没人知道他们是父女，就像仇人一样。</p>
<p>为什么？一个家庭会这样，半辈子都在争吵中渡过？这是一个正常家庭吗？</p>
<p>我的父亲是个脾气暴躁的人，是个蛮横不讲理的人，是个霸道且长年家暴的人，同时又是一个不聪明，却又固执的人。一提起他，我觉得没有人能跟他正常生活超过3天。在心里面，我恨他。我记得，小时候，有一天晚上不知道是因为什么事，我被他揍了，当时心理非常难受，觉得为什么让我出生在这样的家庭，为什么让我面对一个这样的父亲，当天晚上，我甚至都想拿起菜刀，趁他熟睡的时候，送他走了，也算是为家庭做出贡献，但理智让我放下了刀，他毕竟是我父亲。</p>
<p>我的妹妹从小生活在我父母身边，他读完初中，因为讨厌上学(经常跟同学逃课去县城里玩)，而被送到了我父母工作的城市—-云南曲靖，那个时候我是非常反对我妹妹辍学去云南给我父母帮忙做生意的，但只怪我当时无能力改变。</p>
<p>当时心中一直在想，我妹妹将来肯定会后悔当初的决定，只怕将来会埋怨父母，埋怨我没有拦着他。其实我妹妹很聪明，如果让他学一门技术，其实他能很快学会，但是，错就错在，生在这样一个家庭。<br>我妹妹的性格现在让我感觉完全就是我父亲的性格，脾气大，不听劝，偏执，固执，一根筋，没耐性，不爱干净。<br>我只能说，摊上这种父母，我无能为力。</p>
<p>我从小是很不听话的那种小孩，因为生活在这样的家庭里，从初中到大学，都没有和父母生活在一起，我能够分辨出哪些是对的，哪些我是觉得绝对不能听从的。所以，在父母和外人看来，我是非常不听话的，而且每年只要我父母回来，我都会和他们吵架，他们说什么，我不会全部都认为是对的。</p>
<p>我的母亲其实脾气也不小，虽然你看着他感觉很可怜，但是套用鲁讯的一句话：”可怜之人必有可恨之处”!</p>
<p>我的母亲非常唠叨，而且话也非常多，最要命的是，说话从来不过脑子，也从来不长记性，一辈子都不长记性，不过脑子，脾气还不小。</p>
<p>遇到我父亲这种人，肯定不是被骂就是被凶，如果来回吵，肯定就动手了，不该说的别说，永远不知道闭嘴，你知道他蠢，你又说出来，他不恼凶成怒吗？你知道他做错了，你一直说，他不恼凶成怒吗？</p>
<p>希望我不会成为一个那样的父亲，如果哪一天，我发现自己也变成那样，我觉得应该从楼上跳下去自杀，因为如果我变成这样，会对自己的孩子产生一生的阴影。<br>会直接影响孩子的未来健康成长，如果是这样，不如死了算了。</p>
<h2 id="工作琐事分享"><a href="#工作琐事分享" class="headerlink" title="工作琐事分享"></a>工作琐事分享</h2><ul>
<li>年纪越大，耐心越差</li>
</ul>
<p>之前听过一句话，说年纪越大，耐心越差。年经越大，越不想听别人说话。</p>
<p>最近在工作中感受就越来越深了，虽然我很尊重我的领导，也很认同他的工作方式，但是，有时候真的会让我很崩溃。因为，在一些工作中，从头到尾都是他在说，一直说，几乎不给其它人说话的机会，也几乎没有耐心听别人的完整方案，也经常提出一些没经过分析的方案，如果不挑战他吧，按照他说的做，可能做的时候就会入大坑，事后总不能说，”按你说的做的，现在有问题了，没法做下去了“！，但这个时候你就完全被他左右了，被他框死了。如果挑战他吧，又觉得事太多，给他难堪。我觉得，我的领导可能会慢慢的变成了他以前讨厌的人，我真的很惋惜。</p>
<ul>
<li>年纪越大，越自负</li>
</ul>
<p>这个可以理解，因为工作经验会比别人要多，确实在很多地方比较有经验，从而也是非常自信。但请注意，不是全部领域，如果把这种心态上升到权威，上升到绝对自信，我觉得这会打击很多人的自信心，让他们有疑问都不敢提，对领导的方案没有怀疑，其实这对整个工作是没有好处的。对员工而言，也是没有好处的，因为员工得不到锻炼，而解决方案也不一定达到最优。只有在不断的质疑中权衡出来的方案，才是团队的最优方案。</p>
<h2 id="如何平衡生活与工作压力"><a href="#如何平衡生活与工作压力" class="headerlink" title="如何平衡生活与工作压力"></a>如何平衡生活与工作压力</h2><p>这两天一直想回老家看看我母亲，看看她，也只能是看看她。<br>但是，现在想想，对于现状的改变，没有任何作用，既然没有作用，那就算了吧，等国庆节再带着我的小可爱一起回去吧，既然改变不了，又何须徒添伤悲呢？</p>
<p>努力工作吧，为自己的这个新家应对更大的挑战而努力吧！！！！<br>工作上，质疑领导的事情还是少做吧！！！</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/05/22/工作，生活心情整理/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/05/22/工作，生活心情整理/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/04/21/spring-aop-annotation/" title="spring+aop+annotation" itemprop="url">spring+aop+annotation</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-04-21T13:51:05.000Z" itemprop="datePublished"> 发表于 2019-04-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="spring-boot-aop"><a href="#spring-boot-aop" class="headerlink" title="spring-boot-aop"></a>spring-boot-aop</h1><p>spring boot + aop</p>
<h1 id="AOP原理详解"><a href="#AOP原理详解" class="headerlink" title="AOP原理详解"></a>AOP原理详解</h1><p>我们都知道，aop的原理就是动态代理，所以首先来介绍下java的动态代理</p>
<h2 id="动态代理方式"><a href="#动态代理方式" class="headerlink" title="动态代理方式"></a>动态代理方式</h2><p>主要有两种：</p>
<ol>
<li>jdk自带动态代理</li>
<li>cglib</li>
</ol>
<h3 id="JDK自带动态代理"><a href="#JDK自带动态代理" class="headerlink" title="JDK自带动态代理"></a>JDK自带动态代理</h3><blockquote>
<blockquote>
<p>JDK自带的动态代理方式必须要被代理对象实现某些接口；</p>
</blockquote>
</blockquote>
<p>JDK动态代理所用到的代理类在程序调用到代理类对象时才由JVM真正创建，JVM根据传进来的 业务实现类对象 以及 方法名 ，动态地创建了一个代理类的class文件并被字节码引擎执行，然后通过该代理类对象进行方法调用。我们需要做的，只需指定代理类的预处理、调用后操作即可。</p>
<h4 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h4><ol>
<li>实现InvocationHandler接口</li>
<li>调用java.lang.reflect.Proxy类的newProxyInstance或者getProxyClass方法</li>
</ol>
<p>将被代理类传给即将生成的代理类<br>Proxy.newProxyInstance(target.getClass().getClassLoader(),target.getClass().getInterfaces(),this);</p>
<ol>
<li>重载invoke方法，将要处理的统一事件填入</li>
</ol>
<pre><code>public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {.....}
</code></pre><h4 id="关键源码分析"><a href="#关键源码分析" class="headerlink" title="关键源码分析"></a>关键源码分析</h4><pre><code>newProxyInstance ---&gt; getProxyClass0 ---&gt;proxyClassCache.get(loader, interfaces)---&gt;Object subKey = Objects.requireNonNull(subKeyFactory.apply(key, parameter));----&gt;ProxyClassFactory.apply 
</code></pre><h4 id="apply方法里关键代码："><a href="#apply方法里关键代码：" class="headerlink" title="apply方法里关键代码："></a>apply方法里关键代码：</h4><p>//生成代理类class文件</p>
<pre><code>long num = nextUniqueNumber.getAndIncrement();     
String proxyName = proxyPkg + proxyClassNamePrefix + num; 
byte[] proxyClassFile = ProxyGenerator.generateProxyClass(proxyName, interfaces, accessFlags);
</code></pre><h3 id="CGLIB"><a href="#CGLIB" class="headerlink" title="CGLIB"></a>CGLIB</h3><p>cglib是针对类来实现代理的，原理是对指定的业务类生成一个子类，并覆盖其中业务方法实现代理。因为采用的是继承，所以不能对final修饰的类进行代理。</p>
<p>demo中使用的是apache实现的cglib动态代理类：</p>
<p>github地址：</p>
<pre><code>https://github.com/cglib/cglib
</code></pre><p>在这个项目中，我用apache的cglib实现去模拟spring aop的工作原理</p>
        
        
        <p class="article-more-link">
          
            <a href="/2019/04/21/spring-aop-annotation/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/04/21/spring-aop-annotation/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/04/21/spring-aop-annotation/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/03/12/jenkins重置jop的buildNum/" title="jenkins重置jop的buildNum" itemprop="url">jenkins重置jop的buildNum</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-03-12T10:31:00.000Z" itemprop="datePublished"> 发表于 2019-03-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <ol>
<li>Jenkins -&gt; Manage Jenkins</li>
<li>脚本命令行</li>
</ol>
<p>执行：</p>
<pre><code>resetNumberTarget = 1
item = Jenkins.instance.getItemByFullName(&quot;run-bzy-hotel&quot;)
//println(item)
item.builds.each() { build -&gt;
  //println(build)
  //println(build.number)
  if(build.number &gt;= resetNumberTarget)
  {
    println(&quot;About to Delete &apos;&quot; + build + &quot;&apos;&quot;)    
    build.delete()  
  }
}
item.updateNextBuildNumber(resetNumberTarget)
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/jenkins/">jenkins</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/03/12/jenkins重置jop的buildNum/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/03/12/jenkins重置jop的buildNum/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/03/12/spring-security oauth2 集成 swagger 2.9.2/" title="spring-security oauth2 集成 swagger 2.9.2" itemprop="url">spring-security oauth2 集成 swagger 2.9.2</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-03-12T03:56:00.000Z" itemprop="datePublished"> 发表于 2019-03-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="pring-security-oauth2-集成-swagger-2-9-2"><a href="#pring-security-oauth2-集成-swagger-2-9-2" class="headerlink" title="pring-security oauth2 集成 swagger 2.9.2"></a>pring-security oauth2 集成 swagger 2.9.2</h1><p>pom.xml:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?\&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;\&gt;
&lt;modelVersion\&gt;4.0.0\&lt;/modelVersion\&gt;

&lt;groupId\&gt;com.xxx.xxx\&lt;/groupId\&gt;
&lt;artifactId\&gt;bzy-auth\&lt;/artifactId\&gt;
&lt;version\&gt;1.0\&lt;/version\&gt;
&lt;packaging\&gt;jar\&lt;/packaging\&gt;

&lt;name\&gt;xxx-auth\&lt;/name\&gt;
&lt;description\&gt;xxx-auth project for sign,auth\&lt;/description\&gt;

&lt;parent\&gt;
&lt;groupId\&gt;com.xxxl.xxx\&lt;/groupId\&gt;
&lt;artifactId\&gt;xxx-parent\&lt;/artifactId\&gt;
&lt;version\&gt;1.0.0-SNAPSHOT\&lt;/version\&gt;
&lt;/parent\&gt;

&lt;dependencies\&gt;

&lt;dependency\&gt;
&lt;groupId\&gt;com.hhotel.bzy\&lt;/groupId\&gt;
&lt;artifactId\&gt;bzy-common-swagger\&lt;/artifactId\&gt;
&lt;version\&gt;${common.swagger.version}\&lt;/version\&gt;
&lt;type\&gt;jar\&lt;/type\&gt;
&lt;/dependency\&gt;

&lt;dependency\&gt;
&lt;groupId\&gt;org.springframework.cloud\&lt;/groupId\&gt;
&lt;artifactId\&gt;spring-cloud-starter-netflix-eureka-client\&lt;/artifactId\&gt;
&lt;/dependency\&gt;


&lt;dependency\&gt;
&lt;groupId\&gt;org.springframework.cloud\&lt;/groupId\&gt;
&lt;artifactId\&gt;spring-cloud-starter-security\&lt;/artifactId\&gt;
&lt;/dependency\&gt;
&lt;dependency\&gt;
&lt;groupId\&gt;org.springframework.security.oauth.boot\&lt;/groupId\&gt;
&lt;artifactId\&gt;spring-security-oauth2-autoconfigure\&lt;/artifactId\&gt;
&lt;version\&gt;2.1.1.RELEASE\&lt;/version\&gt;
&lt;/dependency\&gt;

&lt;/dependencies\&gt;




&lt;/project\&gt;
</code></pre><p>SwaggerConfig:</p>
<pre><code>package com.xxx.xxx.auth.config;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.AuthorizationCodeGrantBuilder;
import springfox.documentation.builders.OAuthBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.\*;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spi.service.contexts.SecurityContext;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger.web.SecurityConfiguration;
import springfox.documentation.swagger.web.SecurityConfigurationBuilder;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

import java.util.Arrays;

/\*\*  \* Created by sam on 2019/3/11.
     */
    @Configuration
    @EnableSwagger2
    public class SwaggerAuthConfig {

    @Value(&quot;${bzy.swagger-enable}&quot;)
    private Boolean swaggerEnable;

    @Value(&quot;${bzy.swagger-auth-url}&quot;)
    private String authServerUrl;

    @Value(&quot;${bzy.security-auth2.clientId}&quot;)
    private String clientId;

    @Value(&quot;${bzy.security-auth2.clientId}&quot;)
    private String secretKey;

    public SwaggerAuthConfig() {

    }
    @Bean
    public Docket api() {
    return new Docket(DocumentationType.SWAGGER_2)
    .enable(this.swaggerEnable.booleanValue())
    .select()
    .apis(RequestHandlerSelectors.any())
    .paths(PathSelectors.any())
    .build()
    .securitySchemes(Arrays.asList(securityScheme()))
    .securityContexts(Arrays.asList(securityContext()));
    }

    @Bean
    public SecurityConfiguration security() {
    return SecurityConfigurationBuilder.builder()
    .clientId(clientId)
    .clientSecret(secretKey)
    .scopeSeparator(&quot; &quot;)
    .useBasicAuthenticationWithAccessCodeGrant(true)
    .build();
    }


    private SecurityScheme securityScheme() {
    GrantType grantType = new AuthorizationCodeGrantBuilder()
    .tokenEndpoint(new TokenEndpoint(authServerUrl + &quot;/token&quot;, &quot;oauthtoken&quot;))
    .tokenRequestEndpoint(
    new TokenRequestEndpoint(authServerUrl + &quot;/authorize&quot;, clientId, secretKey))
    .build();

    SecurityScheme oauth = new OAuthBuilder().name(&quot;spring_oauth&quot;)
    .grantTypes(Arrays.asList(grantType))
    .scopes(Arrays.asList(scopes()))
    .build();
    return oauth;
    }

    private AuthorizationScope[]() scopes() {
    AuthorizationScope[]() scopes = {
    new AuthorizationScope(&quot;read&quot;, &quot;for read operations&quot;),
    new AuthorizationScope(&quot;write&quot;, &quot;for write operations&quot;),
    new AuthorizationScope(&quot;all&quot;, &quot;for all operation API&quot;) };
    return scopes;
    }

    private SecurityContext securityContext() {
    return SecurityContext.builder()
    .securityReferences(
    Arrays.asList(new SecurityReference(&quot;spring_oauth&quot;, scopes())))
    .forPaths(PathSelectors.any())
    .build();
    }
    }
</code></pre><p><a href="https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api" target="_blank" rel="noopener">参考文章</a></p>
<p><a href="https://www.xncoding.com/2017/07/08/spring/sb-swagger2.html" target="_blank" rel="noopener">优秀博客</a></p>
<p><a href="https://www.cnblogs.com/bndong/p/10037197.html" target="_blank" rel="noopener">优秀博客</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/spring-security-oauth2-swagger2-9-2/">spring-security oauth2 swagger2.9.2</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/03/12/spring-security oauth2 集成 swagger 2.9.2/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/03/12/spring-security oauth2 集成 swagger 2.9.2/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/03/01/微服务与SOA/" title="微服务与传统垂直架构和SOA比较" itemprop="url">微服务与传统垂直架构和SOA比较</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-03-01T07:25:05.000Z" itemprop="datePublished"> 发表于 2019-03-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="传统垂直架构"><a href="#传统垂直架构" class="headerlink" title="传统垂直架构"></a>传统垂直架构</h2><p>传统垂直架构一般是在业务量非常小，业务系统非常简单的系统架构中使用，<br>在这个阶段一般采用SSH，SSM或者spring+mybatis）框架作为项目的关键技术，Struts负责web层逻辑控制、Spring负责业务层管理Bean、Hibernate/mybatis负责数据库操作进行封装，持久化数据。</p>
<p><img src="http://blog.huguiqi.com/1551425267404h53ty19h.png?imageslim" alt="paste image"></p>
<p>如果公司进一步的做大，垂直子系统会变的越来越多，系统和系统之间的调用关系呈指数上升的趋势。</p>
<p>在这样的背景下，很多公司都会考虑服务的SOA化。</p>
<h2 id="SOA"><a href="#SOA" class="headerlink" title="SOA"></a>SOA</h2><p>软件即服务，将单个业务软件系统作为接口提供服务。</p>
<p>SOA代表面向服务的架构，将应用程序根据不同的职责划分为不同的模块，不同的模块直接通过特定的协议和接口进行交互。这样使整个系统切分成很多单个组件服务来完成请求，当流量过大时通过水平扩展相应的组件来支撑，所有的组件通过交互来满足整体的业务需求。</p>
<p><img src="http://blog.huguiqi.com/1551425561530q5t2toln.png?imageslim" alt="paste image"></p>
<p>SOA缺点；</p>
<h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><p>微服务架构是 SOA 架构思想的一种扩展，更加强调服务个体的独立性、拆分粒度更小。<br>与SOA相比，有以下区别：</p>
<ul>
<li>微服务架构强调业务系统需要彻底的组件化和服务化，一个组件就是一个产品，可以独立对外提供服务微服务。</li>
<li>不再强调传统SOA架构里面比较重的ESB企业服务总线</li>
<li>微服务强调每个微服务都有自己独立的运行空间，包括数据库资源。</li>
<li>微服务架构本身来源于互联网的思路，因此组件对外发布的服务强调了采用HTTP Rest API的方式来进行微服务的切分粒度会更小。</li>
</ul>
<p>微服务优点：</p>
<ol>
<li>通过分解巨大单体应用为多个服务方法解决了复杂性问题。</li>
<li>微服务架构模式使得每个微服务独立部署，开发者不再需要协调其它服务部署对本服务的影响。</li>
<li>微服务架构模式使得每个服务可独立扩展。</li>
<li>微服务可有效的拆分应用，实现敏捷开发和部署。</li>
</ol>
<p>不足：</p>
<h2 id="为什么选择spring-cloud"><a href="#为什么选择spring-cloud" class="headerlink" title="为什么选择spring cloud"></a>为什么选择spring cloud</h2><ol>
<li>Spring Cloud来源于Spring，质量、稳定性、持续性都可以得到保证。</li>
<li>Spirng Cloud天然支持Spring Boot，更加便于业务落地。</li>
<li>Spring Cloud发展非常的快，从16年开始接触的时候相关组件版本为1.x，到现在已经发布了2.1.3系列</li>
<li>Spring Cloud是Java领域最适合做微服务的框架。相比于其它框架,Spring Cloud对微服务周边环境的支持力度最大。对于中小企业来讲，使用门槛较低。Spring Cloud　是微服务架构的最佳落地方案</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/03/01/微服务与SOA/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/03/01/微服务与SOA/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/02/22/跟黑哥一起学kafka-一/" title="跟黑哥一起学kafka(一)" itemprop="url">跟黑哥一起学kafka(一)</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-02-22T02:58:12.000Z" itemprop="datePublished"> 发表于 2019-02-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="跟黑哥一起学kafka-一"><a href="#跟黑哥一起学kafka-一" class="headerlink" title="跟黑哥一起学kafka(一)"></a>跟黑哥一起学kafka(一)</h1><h2 id="什么是kafka"><a href="#什么是kafka" class="headerlink" title="什么是kafka"></a>什么是kafka</h2><p>官方原文是这样的：</p>
<blockquote>
<blockquote>
<p>Kafka® is used for building real-time data pipelines and streaming apps. It is horizontally scalable, fault-tolerant, wicked fast, and runs in production in thousands of companies.</p>
</blockquote>
</blockquote>
<p>kafka是用作构建处理实时数据管道和流式数据的应用。<br>它是可以水平扩展的，容错的，快速反应的，被成千上万家公司应用于生产的应用。</p>
<p>这个解析好生硬啊，官方还给了一张图：</p>
<p><img src="http://blog.huguiqi.com/1550805309682duugdu6c.png?imageslim" alt="paste image"></p>
<p>这句话不太好理解，可能语文不太好。<br>不管了，</p>
<h2 id="用来解决什么问题"><a href="#用来解决什么问题" class="headerlink" title="用来解决什么问题"></a>用来解决什么问题</h2><h2 id="kafka主要功能有哪些"><a href="#kafka主要功能有哪些" class="headerlink" title="kafka主要功能有哪些"></a>kafka主要功能有哪些</h2><h2 id="安装-amp-使用"><a href="#安装-amp-使用" class="headerlink" title="安装&amp;使用"></a>安装&amp;使用</h2><ol>
<li>源码安装</li>
<li>docker</li>
<li>安装包</li>
</ol>
<p>我推荐使用docker安装，省时，省力。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/02/22/跟黑哥一起学kafka-一/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/02/22/跟黑哥一起学kafka-一/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/02/20/在google上开通开发者时填入的招商银行双币卡疑似被盗刷/" title="在google上开通开发者时填入的招商银行双币卡疑似被盗刷" itemprop="url">在google上开通开发者时填入的招商银行双币卡疑似被盗刷</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-02-20T08:26:00.000Z" itemprop="datePublished"> 发表于 2019-02-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>今天在开通google cloud 的时候，填写了信用卡信息(因为是必填),顺利开通了google cloud并申请了一台vps vm实例用来作shadowsocks 服务器。</p>
<p>但是，过了一会突然发现招商银行信用卡中心给我微信发了两条交易提醒：</p>
<p><img src="http://blog.huguiqi.com/1550651474728pkwlcyq1.png?imageslim" alt="paste image"></p>
<p>第一感觉就是不是信用卡被盗了？而且是在google上泄漏出去的，这很严重！！！</p>
<p>网上查了一下，原来是google不支持中国（P.R.C），所以只能”被”成为香港（Hong.Kong）公民了,开通了Visa验证，购买后,就会有以下信息：</p>
<pre><code>您尾号XXXX的招行信用卡于1月21日10时15分网上交易当地币8.00元；
</code></pre><p>因为我只是开通开发者成为开发者，并没有真正购买任何商品，只是作了一下信用卡绑定，这可能是google绑定招行双币卡作了一笔会退还的交易，而我注册的时候选择的是居住地在香港，那8元当地币就是港币，当然，它会在几天内还给你，你不需要担心，详见Google的解释：</p>
<pre><code>Authorizations 
Authorizations occur between our billing system and your bank&apos;s billing system to ensure that the card is valid and the necessary funds are available in your account before the order is charged. Because the order has been cancelled, the pending authorization will not result in a charge. 
You may also notice a $1.00 transaction from Google, which is actually a pending authorization request between our billing system and the bank that issued your credit or debit card, so you won&apos;t end up paying the extra $1.00. 
When you check your bank account or credit card statement, payment authorizations are often listed as &quot;pending.&quot; These transactions might remain in your account between 1-14 business days, depending on your card-issuing bank. Please keep in mind they are authorization requests only, not actual charges. 
Authorizations can remain in your account anywhere from 24 hours up to 14 business days, depending on the bank. You may contact your bank to confirm the charge for your purchase with Google or to check on the authorization status.
</code></pre><p>所以，后面又收到一条交易失败的提醒，吓死老子了，我几千万的资产就可能成负的了。。。。。。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂谈/">杂谈</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/02/20/在google上开通开发者时填入的招商银行双币卡疑似被盗刷/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/02/20/在google上开通开发者时填入的招商银行双币卡疑似被盗刷/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/02/20/google-cloud-vm建免费vps/" title="google cloud vm建免费vps" itemprop="url">google cloud vm建免费vps</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-02-20T06:49:47.000Z" itemprop="datePublished"> 发表于 2019-02-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Google-Cloud-Platform免费申请-amp-一键搭建SSR-amp-BBR加速教程"><a href="#Google-Cloud-Platform免费申请-amp-一键搭建SSR-amp-BBR加速教程" class="headerlink" title="Google Cloud Platform免费申请&amp;一键搭建SSR &amp; BBR加速教程"></a>Google Cloud Platform免费申请&amp;一键搭建SSR &amp; BBR加速教程</h1><p><img src="http://blog.huguiqi.com/1550645437458oolft1bo.png?imageslim" alt="paste image"></p>
<ol>
<li>Google Cloud Platform (GCP) 简介<br>Google Cloud Platform (以下简称GCP)是Google提供的云平台, 可以用来搭建加速服务, 网站和存储数据等等, 本文将介绍如何申请GCP一年的免费试用、Linux服务器环境搭建、配置BBR加速以及安装SSR等服务端. 网上关于如何搭建GCP的教程很多, 不过都不是太详尽. 如果你是没基础的新手, 或者像下图这位童鞋踩到坑不知所措的话, 希望这篇教程能帮到你 🙂</li>
</ol>
<p>Google Cloud Platform搭建问题</p>
<ol>
<li>Google Cloud Platform 优势<br>大家用得比较多的可能是Linode, 搬瓦工, Vultr等VPS, 收费$5-$20美金左右.<br>最近LinodeIP段也封得比较多, 基本上开十多台机器都难找到能PING通的IP.<br>另外还有各种VP/恩基本都挂了.<br>至于XX路由器, 本质上只是刷了个固件内置了SS服务而已, 略过不提.</li>
</ol>
<p>GCP的优势在于:</p>
<p>免费<br>Google云服务平台对新用户赠送300美元, 可以免费使用1年.<br>并且到期后如果不打算续费, 也不会额外收取费用 (像亚马逊AWS就直接扣你费用了).<br>如果还想继续用, 直接新注册个账号, 免费 🙂<br>用来搭SS的话, 最低配置的机型$5/月, 出口大陆流量1T以内为0.23$/1G, 算下来每个月可用80多G的流量, 足够用了, 当然你还可以顺便搭个网站之类的 🙂<br>GCP 300美元一年免费试用<br>速度快<br>Google GCP有美国, 亚洲, 欧洲等机房, 而亚洲机房就在厦门正对面的台湾省彰化县, TTL只有40ms左右，快到飞起, 而Linode、Vultr等通常是200多；</p>
<p><img src="http://blog.huguiqi.com/1550645478291dta7czwt.png?imageslim" alt="paste image"></p>
<ol>
<li><p>需要准备的东西<br>Gmail账号<br>双币信用卡 (淘宝购买的虚拟卡无法使用, 不要浪费钱)<br>Xshell: SSH客户端 (也可用Google自带的在线SSH, 以后比较方便).<br>Xshell不建议用绿色版, 某些电脑没装运行库的话可能无法打开.<br>另外之前官方5.0 Build 1322版本存在后门, 所以还是去官网下载最新的安装版吧.<br>Xshell 6官网下载地址点我, 目前家庭与学校用户可免费使用. 填写姓名和邮箱并提交表单后, 邮箱会收到下载链接.<br>puttygen: SSH密钥生成工具. 官网下载地址: puttygen 32位 , puttygen 64位<br>能访问Google (额, 这貌似是个悖论, 你可以先找其他临时方案)<br>需要一定动手能力以及Linux系统基础知识, 想省事或遇到问题的, 请找人工付费服务…<br>废话不多说,下面直接上教程:</p>
</li>
<li><p>申请Google Cloud Platform<br>4.1 注册<br>申请地址: <a href="https://cloud.google.com/free/" target="_blank" rel="noopener">https://cloud.google.com/free/</a></p>
</li>
</ol>
<p><img src="http://blog.huguiqi.com/1550645534869jqqmk5f5.png?imageslim" alt="paste image"></p>
<p>Google Cloud Platform 免费试用<br>点击免费试用, 登入Gmail账号.<br>地区选中国.</p>
<p><img src="http://blog.huguiqi.com/1550645557551lan7x677.png?imageslim" alt="paste image"></p>
<p>账号类型选个人, 接下来输入账单地址以及信用卡信息. Google会从信用卡扣除1美元用于验证, 验证完成后会退还到账户.<br>点击开始免费试用.</p>
<p>4.2 激活结算账号<br>注册成功后可能并不能马上使用 (国内注册的基本都需要激活, 当然也不排除你人品好的情况), Gmail邮箱会受到一封标题为紧急通知：您的结算帐号 XXXXX 已经被暂停使用的邮件, 你需要点击邮件中的链接, 上传身份证和信用卡照片完成验证 (信用卡照片可以遮住或PS掉敏感信息, 只保留最后四位, 自己看页面提示), 一般提交后10分钟左右就能收到通过的邮件, 验证完成后就可以正常使用了.</p>
<p>这一步很多人会忽略, 结果就是创建实例的时候会不停提示你Enable Billing Account, 但是指引界面又没有明确说明要怎么激活, 即使是进到账号管理界面也无法自己开启. 所以别忘了去喵一眼你的邮箱 🙂</p>
<p><img src="http://blog.huguiqi.com/1550645633146sc8anwy9.png?imageslim" alt="paste image"></p>
<p>邮件: 紧急通知：您的结算帐号 XXXXX 已经被暂停使用<br>结算账号验证成功后会显示消息:</p>
<p><img src="http://blog.huguiqi.com/155064566991862c1mypz.png?imageslim" alt="paste image"></p>
<p>结算账号验证成功消息<br>4.3 修改防火墙规则<br>有的文章是先创建实例再改规则.<br>我们先修改防火墙规则, 后面会省事一点.</p>
<p><img src="http://blog.huguiqi.com/1550645708034sj9y13cj.png?imageslim" alt="paste image"></p>
<p>直接访问 <a href="https://console.cloud.google.com/networking/firewalls/list" target="_blank" rel="noopener">https://console.cloud.google.com/networking/firewalls/list</a></p>
<p>Google Cloud Platform 防火墙规则<br>点击创建防火墙规则, 按下图设置:</p>
<p><img src="http://blog.huguiqi.com/15506457319939ssxmqpy.png?imageslim" alt="paste image"></p>
<p>Google Cloud Platform 创建防火墙规则<br>注意IP地址范围是0.0.0.0/0, 别写错了.<br>有遇到过有人写成0.0.0.0, 结果后来怎么试都不成功的.</p>
<p>4.5 创建计算引擎<br>4.5.1 创建实例</p>
<p>直接访问 <a href="https://console.cloud.google.com/compute/instances" target="_blank" rel="noopener">https://console.cloud.google.com/compute/instances</a><br>或登录GCP控制台后, 点击计算引擎 – 创建实例. 如图:</p>
<p>名称: 随便填<br>地区: 建议选asia-east1-c<br>asia-east1-a, asia-east1-b, asia-east1-c 机房都在中国台湾彰化县, 实测c区更好.</p>
<p><img src="http://blog.huguiqi.com/1550645905180a22csqj8.png?imageslim" alt="paste image"></p>
<p>4.5.2 生成静态IP<br>点击网络选项卡—外部IP—创建IP地址.</p>
<p><img src="http://blog.huguiqi.com/1550645997523jarg291u.png?imageslim" alt="paste image"></p>
<p>Google运服务器-创建实例-网络选项卡<br>外部IP,创建IP地址<br>创建IP地址<br>然后会提示输入名称, 任意输入即可(小写字母开头,不能为大写字母)</p>
<p>保留新的静态IP地址<br>补充说明<br>关于IP会有静态和临时两个选项.<br>推荐选择静态, 选择临时的话机器重启后会重新分配IP地址.</p>
<p><img src="http://blog.huguiqi.com/155064606590858rawbmd.png?imageslim" alt="paste image"></p>
<p>更多信息可以去Dashboard中的网络 – VNC网络 – 外部IP地址或直接点击<a href="https://console.cloud.google.com/networking/addresses/list查看" target="_blank" rel="noopener">https://console.cloud.google.com/networking/addresses/list查看</a>.</p>
<p>把创建好的IP记下来, 用Xshell连接的时候会用到.</p>
<p>静态IP一定记得绑定到实例.<br>已分配但未被使用的IP, 会按$0.01/小时计费.</p>
<p>4.5.3上传SSH公钥<br>点击SSH密钥选项卡</p>
<p>Google Cloud Platform - 创建实例 - SSH密钥选项卡<br>在上图文本框内填入4.4.1步骤中puttygen中生成的公钥, 注意是下图中蓝色部分的内容, 直接全选并复制, 再粘贴过来即可.</p>
<p>最后点击最底部的创建按钮, 创建实例.</p>
<p>页面左下角会提示正在创建实例, 实际等待10秒左右即可创建完成并启动.</p>
<p>正在创建GCP VM实例<br>VM实例管理界面第一列中绿色的对勾图标表示该实例正在运行, 第五列为实例的外部IP, 也就是下一步用Xshell连接时需要用到的主机IP地址.</p>
<ol>
<li>一键安装最新内核并开启BBR脚本<br>BBR要求系统内核版本为4.9以上, 本文采用teddysun的脚本, 支持一键自动判断和安装所需内核版本并开启BBR.</li>
</ol>
<p>5.1 连接XShell<br>通过Xshell连接到Google Cloud VPS.</p>
<p>主机: 之前步骤创建的静态IP, 也可在GCP VM实例的管理界面查看.<br>端口: 默认的22端口<br>用户名: 如你的gmail邮箱是username@gmail.com, 则用户名是username<br>密钥: 使用之前puttygen生成的私钥, 导入即可.</p>
<p>有的小伙伴不会用Xshell, 补充几张图片:</p>
<p>Google也自带了在线SSH, 实例创建好后, 在列表界面点击SSH – 在浏览器窗口中打开即可进入, 见下图.<br>不过出于个人习惯, 用Xshell本地进行连接管理更方便, 不用每次都打开浏览器进GCP后台.</p>
<p>5.2 运行BBR脚本<br>通过脚本一键升级内核并安装BBR加速.</p>
<p>Linux系统中root用户拥有最高权限, 出于安全考虑, GCP默认是以普通用户登录的, 我们需要先切换到root用户, 否则运行某些命令时会提示无权限.</p>
<p>先切换到root用户.<br>Xshell连上服务器后, 输入命令:<br>sudo -i</p>
<p>切换后, 命令前面的提示符中也会显示root, 如图:</p>
<p>依次运行以下4条命令</p>
<p>yum install -y wget<br>wget –no-check-certificate <a href="https://github.com/teddysun/across/raw/master/bbr.sh" target="_blank" rel="noopener">https://github.com/teddysun/across/raw/master/bbr.sh</a><br>chmod +x bbr.sh<br>./bbr.sh<br>安装完成后，脚本会提示需要重启VPS，输入 y 并回车后重启, 这时Xshell连接也会自动断开。</p>
<p>VPS重启可能需要几分钟, 耐心等待一下.</p>
<p>重启完成后，再用Xhell重新连接VPS, sudo -i切换到root用户.</p>
<p>现在验证一下是否成功安装了最新内核并开启BBR.<br>输入以下命令：</p>
<p>uname -r<br>查看内核版本，如果返回值含有4.13或以上版本, 就表示OK了.</p>
<p>sysctl net.ipv4.tcp_available_congestion_control<br>返回值一般为：<br>net.ipv4.tcp_available_congestion_control = bbr cubic reno</p>
<p>sysctl net.ipv4.tcp_congestion_control<br>返回值一般为：<br>net.ipv4.tcp_congestion_control = bbr</p>
<p>sysctl net.core.default_qdisc<br>返回值一般为：<br>net.core.default_qdisc = fq</p>
<p>lsmod | grep bbr<br>返回值有 tcp_bbr 模块即说明bbr已启动。</p>
<ol>
<li>安装SSR<br>本文采用秋水逸冰的Shadowsocks一键安装脚本(四合一).<br>依次运行以下3条命令:</li>
</ol>
<p>2017.12.3更新: 记得先用sudo -i命令切换到root用户, 不然会显示This script must be run as root! 见下图:</p>
<p>wget –no-check-certificate -O shadowsocks-all.sh <a href="https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh" target="_blank" rel="noopener">https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</a><br>chmod +x shadowsocks-all.sh<br>./shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log<br>注意: 前面两行命令其实是同一行, 因为网页排版的问题显示成2行了, 直接把这两行都复制, 再粘贴到Xshell即可. 好多人在这一步出错, 特意提醒下. 具体看截图:</p>
<p>然后是选择SSR版本, 设置端口、密码、加密方式等等，之前的 SSR安装教程有详细步骤， 此处略过.</p>
<p>安装好之后即可通过客户端进行连接与测速.</p>
<p>最后附上测速:</p>
<p>小飞机客户端的使用请参考:</p>
<p>ShadowsocksR客户端 各种隐藏使用技巧说明<br>SSR 安卓 &amp; 苹果 Iphone, Ipad一键设置教程.</p>
<ol>
<li>关于流量与扣费<br>Google Cloud Platform计算引擎是按小时收费，网络按流量收费.<br>我们掏出笔来算一算:<br>注册赠送了300美金, 一年免费使用期.</li>
</ol>
<p>主机我们选的是微型(最低配置机型), $5/月.<br>还剩300-5*12=$240, 用于抵扣流量的费用.<br>谷歌云服务器出口大陆流量1T以内价格约为0.23$/1G.<br>那么每个月可用流量 = 240/12/0.23 ≈ 86G, 一般日常使用绝对够用, 当然你还可以顺便搭个网站之类的 🙂</p>
<ol>
<li>如何查看使用量及余额<br>进入结算概览页面: <a href="https://console.cloud.google.com/billing/" target="_blank" rel="noopener">https://console.cloud.google.com/billing/</a></li>
</ol>
<p>可以看到剩余的赠金和天数.<br>点击左侧交易, 以及图中下方相关联的项目名称, 可以查看使用量和扣费明细.</p>
<p>结算概览查看使用量明细和赠金余额</p>
<ol>
<li><p>增加Swap交换分区与调优<br>GCP默认没有Swap交换分区, 如果0.6G内存不够用, 可以手动增加Swap交换分区并且调整对应的内核参数. 参考文章: Google Cloud Platform 增加Swap交换分区与调优</p>
</li>
<li><p>如何开启root登录 (非必须)<br>出于安全因素, Google Cloud Platform默认是以普通用户密钥认证的方式登录的, 禁止root登录. 如需要root权限可以使用命令sudo -i进行切换.<br>如果需要直接使用root登录,按如下设置:</p>
</li>
</ol>
<p>先切换到root<br>sudo -i</p>
<p>创建.ssh目录并修改权限, 然后复制普通用户的密钥文件到root相应目录下. 用户名注意换成你自己的.<br>mkdir .ssh &amp;&amp; chmod 700 .ssh &amp;&amp; cp /home/你的gmail用户名/.ssh/authorized_keys .ssh</p>
<p>修改SSH配置文件<br>vim /etc/ssh/sshd_config<br>将PermitRootLogin no改为PermitRootLogin yes并保存</p>
<p>重启SSH服务<br>systemctl restart sshd.service</p>
<p>测试是否设置成功</p>
<ol>
<li>FAQ<br>Q: 运行某些命令提示 <em>*</em> Operation not permitted或者You need to be root to perform this command.?<br>A: 一般是权限不够. 管理GCP时, 记得先sudo -i切换到root用户, 否则某些命令无法运行.</li>
</ol>
<p>Q: 区域选的是asia-east1-c台湾机房, 为什么ping显示是美国IP?<br>A: 正常. Ping测试不准. IP地址是谷歌从美国申请的, 但是可用于全球任何一个机房, 因为谷歌是采用网间结算(IP Transit)服务，直接指定部分段与某地区运营商进行连接. 详细机房位置参考: <a href="https://cloud.google.com/compute/docs/regions-zones/#available" target="_blank" rel="noopener">https://cloud.google.com/compute/docs/regions-zones/#available</a>. 另外可用tracert或mtu命令测试路由与节点. Ping的话建议www.ipip.net.</p>
<p>Q: 还能更快吗?<br>A: 可以, 关键词: 魔改版BBR, 自行搜索</p>
<p>Q: 装BBR脚本时, 手动更换内核，重启后，整个磁盘变为只读怎么办?<br>A: 执行命令mount -o remount rw /即可恢复.</p>
<p>Q: 根据谷歌的Always Free政策, us-east1, us-west1, and us-central1这三个地区的微型机器永久免费, 能用吗?<br>A: 可以忽略. 流入中国和澳大利亚的流量要收费, 如下图. 更多限制政策请参考: <a href="https://cloud.google.com/compute/pricing#freeusage" target="_blank" rel="noopener">https://cloud.google.com/compute/pricing#freeusage</a><br>Google Cloud Platform的Always Free政策使用限制<br>Q: Google Cloud Platform能用来建站吗?<br>A: 当然可以, 不过长期建站还是推荐用Linode. GCP流量是要扣费的. 另外外贸站建议机房使用目标客户所在国家. 国内站的话, 反正百度是不咋待见国外服务器的.</p>
<p>转：<a href="https://www.wmsoho.com/google-cloud-platform-ssr-bbr-tutorial" target="_blank" rel="noopener">https://www.wmsoho.com/google-cloud-platform-ssr-bbr-tutorial</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/02/20/google-cloud-vm建免费vps/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/02/20/google-cloud-vm建免费vps/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/02/16/docker日志问题导致磁盘空间被占用/" title="docker日志问题导致磁盘空间被占用" itemprop="url">docker日志问题导致磁盘空间被占用</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2019-02-16T12:15:00.000Z" itemprop="datePublished"> 发表于 2019-02-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="docker日志问题导致磁盘空间不足"><a href="#docker日志问题导致磁盘空间不足" class="headerlink" title="docker日志问题导致磁盘空间不足"></a>docker日志问题导致磁盘空间不足</h1><p>昨天突然发现本厂开发环境各个docker实例都处于非健康状态，在宿主机上执行命令：</p>
<pre><code>df -h
</code></pre><p>发现docker相关的文件占用空间是100%：</p>
<p><img src="http://blog.huguiqi.com/1550319498360gfiveq9s.png?imageslim" alt="paste image"></p>
<p>有点不正常，我看看docker相关的文件占用情况，是镜像占用的还是容器占用的，或者是Volumes占用的，执行：</p>
<pre><code>docker system df
</code></pre><p>这里面显示一切正常，也并没有超过挂载盘的大小256G。</p>
<p>首先把多余的镜像和不用的docker都清理掉。</p>
<p>执行命令：</p>
<pre><code>docker system prune -a
</code></pre><p>可以将没有容器使用Docker镜像和未开启的容器都删掉。</p>
<p>我看到占用超过226G空间的都来自 <code>/mnt/docker/overlay2/*</code> 这个目录,<br>进入到这个目录，并执行：</p>
<pre><code>du -lbhs ./*
</code></pre><p>发现这里面也没有超过2个G的目录文件大小。</p>
<p>我潜意识里就觉得八成是日志导致的，所以我首先看看是不是我所有的docker输出的日志文件是否需要清理了，我到挂载目录里去看看，果然发现了很多docker容器的日志目录就占了1-2个G，我du -lbhs 了一下，发现所有容器挂载的日志目录加起来的容量才8G多点，不足以占用256个G的空间。<br>算了，先把这8个G的占用清了吧。</p>
<pre><code>rm -rf ./*/logs/*
</code></pre><p>然后我再看看docker容器本身还有多少占用的空间情况：</p>
<pre><code>docker ps --size
</code></pre><p>发现还有两个docker占用了3个多占的空间，但是又不知道具体是什么导致的，那我只能看看docker本身的硬盘占用情况了：</p>
<pre><code>docker diff &lt;container&gt;
</code></pre><p>发现<code>/tmp</code> 目录下有好多文件：</p>
<p><img src="http://blog.huguiqi.com/15503217004152bmdcd14.png?imageslim" alt="paste image"></p>
<p>还有指向<code>/tmp/tomcat.*/*</code> 相关的目录：</p>
<p><img src="http://blog.huguiqi.com/1550321770403ggnsq3dy.png?imageslim" alt="paste image"></p>
<p>我觉得八成就是这些东西占用的，/tmp 临时文件按道理讲系统会自动删除的，不知道为什么没有删除，这个后面再找原因。<br>我就把所有docker容器里的<code>/tmp</code>目录下的文件全部删除，反正是临时文件。</p>
<pre><code>docker exec &lt;container&gt; rm -rf /tmp/*
</code></pre><p>好，都删除了，再看一下硬盘空间，发现还是已使用100%。</p>
<p>怎么办，有点慌了，我看这个指向的还是overlay2目录，我尝试着在目录里找找问题。</p>
<p>我想，这个overlay2目录可能有挂载或者链接，它自身并不大，是挂载的目录占用大。</p>
<p>我们往上一级再看看哪个文件占用空间大：</p>
<pre><code>cd ..
du -lbhs ./*
</code></pre><p>发现有几个contarins目录下的目录文件占用挻大的：</p>
<p><img src="http://blog.huguiqi.com/1550320388470wopcicty.png?imageslim" alt="paste image"></p>
<p>我就从最大的目录下手，占用空间7.4G的，是8972f…..这个目录，我进去看一眼：</p>
<p><img src="http://blog.huguiqi.com/1550320522538gmcr7qay.png?imageslim" alt="paste image"></p>
<p>我发现里面有个后缀为<code>xxxx-json.log</code>的这个文件占了198G，这个就是问题了，很兴奋，赶紧删除了：</p>
<pre><code>rm -rf ./*/*.log
</code></pre><p>这个就把所有的contarner的控制台日志文件删除了。</p>
<p>我们再看看docker的空间占用情况：</p>
<p><img src="http://blog.huguiqi.com/1550322418176dwe2uam6.png?imageslim" alt="paste image"></p>
<p>这里已经很好了，只有镜像占用了1个多G。</p>
<p>我们再来看看宿主机的空间情况：</p>
<pre><code>df -h
</code></pre><p>发现还是100%，见鬼了：</p>
<p><img src="http://blog.huguiqi.com/1550319498360gfiveq9s.png?imageslim" alt="paste image"></p>
<p>一般觉得见鬼了的时候，只有两种情况，一种是你操作错了别的东西，一种是缓存，我觉得是后者。</p>
<p>我觉得肯定是docker还没有读到真实的容器占用硬盘空间的数据，那我只能重启docker了：</p>
<pre><code>systemctl daemon-reload 

systemctl restart docker
</code></pre><p>为了确认一切顺利，运行:</p>
<pre><code>docker info
</code></pre><p>ok，没有问题了，再执行 <code>df -h</code><br>很好：</p>
<p><img src="http://blog.huguiqi.com/1550322879853rhx6bckp.png?imageslim" alt="paste image"></p>
<p>已经只占用挂载磁盘 <code>/dev/vdbd1</code>总大小的2%。</p>
<p>看来后面还是要写一个自动删除日志的脚本，来维持硬盘空间的大小。</p>
<p><a href="https://github.com/moby/moby/issues/33775" target="_blank" rel="noopener">参考文章1</a></p>
<p><a href="https://meta.discourse.org/t/var-lib-docker-overlay2-took-all-the-disk-space/84624" target="_blank" rel="noopener">参考文章2</a></p>
<p><a href="https://stackoverflow.com/questions/46672001/is-it-safe-to-clean-docker-overlay2" target="_blank" rel="noopener">参考文章3</a></p>
<p><a href="https://blog.csdn.net/weixin_32820767/article/details/81196250" target="_blank" rel="noopener">参考文件章4</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/IT-运维/">IT&运维</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/docker/">docker</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2019/02/16/docker日志问题导致磁盘空间被占用/#comments" class="ds-thread-count comments-count-link" data-thread-key="2019/02/16/docker日志问题导致磁盘空间被占用/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>



</div>

      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="huguiqi" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/AFNetWork3-1/" title="AFNetWork3.1">AFNetWork3.1<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Alcatraz/" title="Alcatraz">Alcatraz<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/IT-运维/" title="IT&amp;运维">IT&amp;运维<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/activiti/" title="activiti">activiti<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/docker/" title="docker">docker<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/git/" title="git">git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/github-博客/" title="github 博客">github 博客<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo插件/" title="hexo插件">hexo插件<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/ios-Developer/" title="ios Developer">ios Developer<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/java/" title="java">java<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/javascript/" title="javascript">javascript<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/node/" title="node">node<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/nodejs/" title="nodejs">nodejs<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/redis/" title="redis">redis<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springCloud/" title="springCloud">springCloud<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springboot/" title="springboot">springboot<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/activiti/springboot/" title="springboot">springboot<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springcloud/" title="springcloud">springcloud<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/xcode/" title="xcode">xcode<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/专业技术-印象笔记/" title="专业技术(印象笔记)">专业技术(印象笔记)<sup>222</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端技术/" title="前端技术">前端技术<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/大数据/" title="大数据">大数据<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/感悟/" title="感悟">感悟<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/杂谈/" title="杂谈">杂谈<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/科学上网/" title="科学上网">科学上网<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/站内搜索-博客/" title="站内搜索 博客">站内搜索 博客<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/管理/" title="管理">管理<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/系统/" title="系统">系统<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/系统-工具/" title="系统&amp;工具">系统&amp;工具<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/系统-运维/" title="系统&amp;运维">系统&amp;运维<sup>17</sup></a></li>
		  
		
		  
			<li><a href="/categories/网络配置/" title="网络配置">网络配置<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/读书笔记/" title="读书笔记">读书笔记<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/随笔/" title="随笔">随笔<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/面试题/" title="面试题">面试题<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/从印象笔记导入/" title="从印象笔记导入">从印象笔记导入<sup>222</sup></a></li>
			
		
			
				<li><a href="/tags/随笔/" title="随笔">随笔<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/springboot/" title="springboot">springboot<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/spring-cloud/" title="spring cloud">spring cloud<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/面试题/" title="面试题">面试题<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Rejected/" title="Rejected">Rejected<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/nginx/" title="nginx">nginx<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ReactNative/" title="ReactNative">ReactNative<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/javascript-原型编程/" title="javascript&amp;原型编程">javascript&amp;原型编程<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/jenkins/" title="jenkins">jenkins<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/nodejs/" title="nodejs">nodejs<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker-compose/" title="docker-compose">docker-compose<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/redis/" title="redis">redis<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ios-developer-upload/" title="ios developer upload">ios developer upload<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker-国内镜像/" title="docker 国内镜像">docker 国内镜像<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ios-developer-上传审核/" title="ios developer 上传审核">ios developer 上传审核<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/面试题-全栈/" title="面试题 全栈">面试题 全栈<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/hy/" title="hy">hy<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://godeggs.cn " target="_blank" title="承接手机app、微信、web开发">找人做软件</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.huguiqi.com." target="_blank" title="sam&#39;s Blog">sam&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  

<div class="doubanshow">
<p class="asidetitle">豆瓣秀</p>
<div>
<script type="text/javascript" src="http://www.douban.com/service/badge/64698454/?show=collection&amp;n=12&amp;columns=3&amp;hidelogo=yes&amp;hideself=yes&amp;cat=book|movie" ></script>
</div>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1601653200&verifier=bd864c6a&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Sam.This is my Blog. <br/>
			Anything that can go wrong will go wrong</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/1601653200" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/huguiqi" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/XiaoheiSpring" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/sam.hu.7334" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		<a href="https://www.linkedin.com/in/小黑-胡-ab83b992" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		<a href="https://www.douban.com/people/64698454" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/hu-xiao-hei-53" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		<a href="https://plus.google.com/109318125124422212783?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:guiqi.hu@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="http://blog.huguiqi.com." target="_blank" title="sam">sam</a> © 2019 
		
		<a href="/about" target="_blank" title="sam">sam</a>
		
		
		</p>
</div>

 <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','qtnHgvQyg5N9h4en-9wA','2.0.0');
</script>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?f5971877c7b77f98074be3ddabf34fbe";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

    <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//huguiqicom.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<script id="dsq-count-scr" src="//huguiqicom.disqus.com/count.js" async></script>

    
  </body>
 </html>
